<!DOCTYPE html>
<html lang="zh" noscript>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
<meta property="og:site_name" content="Peter&#39;s Blog" />
<meta name="color-scheme" content="light dark">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">



<link rel="icon" type="image/x-icon" href="/favicon.ico">

<title>11 Express - Peter&#39;s Blog</title>
    <meta name="og:title" content="11 Express - Peter&#39;s Blog" /><meta name="description" content=" …" />
    <meta property="og:description" content=" …" />
    <link rel="canonical" href="/techs/11-express/" />
    <meta property="og:url" content="/techs/11-express/" /><link rel="alternate" type="application/rss+xml" href="https://PeterFuApps.github.io/index.xml">
    
    <meta property="og:locale" content="zh" /><meta name="generator" content="Hugo 0.146.6">
<style>
  @layer {
    body {
      background: white;
    }
  }
  @media (prefers-color-scheme: dark) {
    @layer {
      body {
        background: black;
      }
    }
  }
</style>







  
  
  
  
    
      
      
      
      

      
      
      
      
      
      
      <link rel="stylesheet" href="/css/tailwind_a16942ad.7b022486e448ebe9100a9476c8d0d7dc2b4ce62c0504d052a327b8a98019247a.css" integrity="sha256-ewIkhuRI6&#43;kQCpR2yNDX3CtM5iwFBNBSoye4qYAZJHo=" crossorigin="anonymous">
      
    
    
  

  
  
  
  
    
      
      
      
      

      
      
      
      
      
      
      <link rel="stylesheet" href="/css/main_434dc2f7.08359d2deb381a15bd26bd1b957cf4328dde8f0426f9470ca946b0d6fe53835a.css" integrity="sha256-CDWdLes4GhW9Jr0blXz0Mo3ejwQm&#43;UcMqUaw1v5Tg1o=" crossorigin="anonymous">
      
    
    
  
<script>
  window.BUILD_HASH = "c7e0eb4a058e18c7b65474546a085dd4"
</script>
































  
    <script src="/js/const.min.a4b940d5f9c396615d28bb05ce96d691327e654eaa866dc9d3ce9ee25cd79751.js" integrity="sha256-pLlA1fnDlmFdKLsFzpbWkTJ&#43;ZU6qhm3J086e4lzXl1E="></script>
  

  
    <script src="/js/i18n.min.ffea6affd01dead5d03d0743c01b5f221b784a2ddfe3edcddd312a2e6590e222.js" integrity="sha256-/&#43;pq/9Ad6tXQPQdDwBtfIht4Si3f4&#43;3N3TEqLmWQ4iI="></script>
  

  
    <script src="/js/util.min.accd3b83a1f2b6c5abb7ad0fe010cd9843aa8c48242d66a94d1dd20d59bc6ad7.js" integrity="sha256-rM07g6HytsWrt60P4BDNmEOqjEgkLWapTR3SDVm8atc="></script>
  








  
    <script src="/js/observer.26f48f94fc94361e5354a27d8223608d797b0a96740f956196ee5482c2284f8d.js" integrity="sha256-JvSPlPyUNh5TVKJ9giNgjXl7CpZ0D5Vhlu5UgsIoT40=" defer></script>
  

  
    <script src="/js/main.02049b5d9722deb350f2b796e24d10ab09f6524a209136fe1cf1d51b17109557.js" integrity="sha256-AgSbXZci3rNQ8reW4k0Qqwn2UkogkTb&#43;HPHVGxcQlVc=" defer></script>
  

  
    <script src="/js/gradient.4e555cb9653273f0a6ada217869c908541c13c0f9c5731590e5497b6cd5eaa89.js" integrity="sha256-TlVcuWUyc/CmraIXhpyQhUHBPA&#43;cVzFZDlSXts1eqok=" defer></script>
  

  
    <script src="/js/theme.365eaab4220e89c235ba91d94d2b507bc83d0b77627c3e63f248434f820894cd.js" integrity="sha256-Nl6qtCIOicI1upHZTStQe8g9C3difD5j8khDT4IIlM0=" defer></script>
  

  
    <script src="/js/scroll.eccb40648d97450f30cdbea14704dee453464e3a0d2ea1c99e3966a46f95abd2.js" integrity="sha256-7MtAZI2XRQ8wzb6hRwTe5FNGTjoNLqHJnjlmpG&#43;Vq9I=" defer></script>
  

  
    <script src="/js/shine.74e94faf6ee3eabd87417b177333a80c3d3a9feca2363260c6f1e8d2c24c6704.js" integrity="sha256-dOlPr27j6r2HQXsXczOoDD06n&#43;yiNjJgxvHo0sJMZwQ=" defer></script>
  









  
    <script src="/js/img.0cd11c8a348322294dd228e0ae5cf4381285da5a7cd15e87aa74b1a9c0ca8063.js" integrity="sha256-DNEcijSDIilN0ijgrlz0OBKF2lp80V6HqnSxqcDKgGM=" async></script>
  




  <script src="/js/tex-svg.js" async></script>


</head>

<body class="h-screen flex flex-col overflow-hidden">
  
  <div class="flex-1 overflow-hidden">
    <div class="h-full w-full overflow-y-auto relative" id="scroll-container">
      
<input type="checkbox" id="theme-menu-toggle" class="hidden">


<nav class="ui-page-nav ui-panel-base ui-navbar sticky top-0 z-40 overflow-x-clip">
    <div class="ui-grid">
        <div class="col-span-full flex flex-col sm:gap-4 sm:flex-row items-center justify-between">
            <div class="flex items-center sm:w-full max-sm:mt-4 w-auto">
                <h1 class="flex items-center">
                    <a href="/" class="flex items-center w-full">
                        
                        
                            <span class="site-title">Peter&#39;s Blog</span>
                        
                    </a>
                </h1>
                
                
                <div class="ml-2">
                    <div class="ui-tooltip bottom rounded-full" data-tooltip="主题切换">
                        <label for="theme-menu-toggle" class="flex ui-button-concealed ui-interactive ui-menu-item p-1 ui-interactive cursor-pointer">
                            <i class="dark-hidden inline-block icon js-sun"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
</svg>
</i>
                            <i class="dark-inline-block hidden icon js-moon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
</svg>
</i>
                        </label>
                    </div>
                </div>
            </div>

            <ul class="nav-menu flex gap-2 p-0 w-full md:w-auto justify-center sm:justify-end" id="nav-content">
                
                
                    <li>
                        
                        

                        <div class="ui-tooltip bottom rounded-full"  data-tooltip="首页 Home">
                            <a href="/" 
                                draggable="false"
                                
                                    class="ui-button-concealed ui-interactive ui-menu-item"
                                
                                
                                >
                                
                                    <i class="icon"><svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10 18V15C10 13.8954 10.8954 13 12 13V13C13.1046 13 14 13.8954 14 15V18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2 8L11.7317 3.13416C11.9006 3.04971 12.0994 3.0497 12.2683 3.13416L22 8" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 11V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V11" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</i>
                                
                            </a>
                            
                            
                        </div>
                    </li>
                
                    <li>
                        
                        
                            
                        

                        <div class="ui-tooltip bottom rounded-full"  data-tooltip="技术 Tech">
                            <a href="/techs/" 
                                draggable="false"
                                
                                    class="ui-button ui-menu-item ui-interactive"
                                
                                
                                aria-current="true">
                                
                                    <i class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pc-case-icon lucide-pc-case"><rect width="14" height="20" x="5" y="2" rx="2"/><path d="M15 14h.01"/><path d="M9 6h6"/><path d="M9 10h6"/></svg></i>
                                
                            </a>
                            
                            
                        </div>
                    </li>
                
                    <li>
                        
                        

                        <div class="ui-tooltip bottom rounded-full"  data-tooltip="文章 Docs">
                            <a href="/docs/" 
                                draggable="false"
                                
                                    class="ui-button-concealed ui-interactive ui-menu-item"
                                
                                
                                >
                                
                                    <i class="icon"><svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.90602 17.505L5.33709 3.71766C5.5289 2.62987 6.56621 1.90354 7.654 2.09534L19.4717 4.17912C20.5595 4.37093 21.2858 5.40824 21.094 6.49603L18.6629 20.2833C18.4711 21.3711 17.4338 22.0975 16.346 21.9057L4.52834 19.8219C3.44055 19.6301 2.71421 18.5928 2.90602 17.505Z" stroke="currentColor"/>
<path d="M8.92902 6.38184L16.8075 7.77102" stroke="currentColor" stroke-linecap="round"/>
<path d="M8.23444 10.3213L16.1129 11.7105" stroke="currentColor" stroke-linecap="round"/>
<path d="M7.53986 14.2607L12.4639 15.129" stroke="currentColor" stroke-linecap="round"/>
</svg>
</i>
                                
                            </a>
                            
                            
                        </div>
                    </li>
                
                    <li>
                        
                        

                        <div class="ui-tooltip bottom rounded-full" >
                            <a href="/archives/" 
                                draggable="false"
                                
                                    class="ui-button-concealed ui-interactive ui-menu-item"
                                
                                
                                >
                                
                                    <i class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
</svg>
</i>
                                
                            </a>
                            
                            
                                 
                            <div class="ui-tooltip-menu">
                                
                                    
                                    
                                
                                <a class="ui-tooltip-menu-item" href="/archives/" 
                                draggable="false">
                                    
                                    <i class="icon size-4"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
</svg>
</i>
                                    
                                    归档 Archive
                                </a>
                                
                                    
                                    
                                
                                <a class="ui-tooltip-menu-item" href="/categories/" 
                                draggable="false">
                                    
                                    <i class="icon size-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder-icon lucide-folder"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg></i>
                                    
                                    分类 Categories
                                </a>
                                
                                    
                                    
                                
                                <a class="ui-tooltip-menu-item" href="/series/" 
                                draggable="false">
                                    
                                    <i class="icon size-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bookmark-icon lucide-bookmark"><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"/></svg></i>
                                    
                                    系列 Series
                                </a>
                                
                                    
                                    
                                
                                <a class="ui-tooltip-menu-item" href="/tags/" 
                                draggable="false">
                                    
                                    <i class="icon size-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag-icon lucide-tag"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"/><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"/></svg></i>
                                    
                                    标签 Tags
                                </a>
                                
                            </div>
                            
                        </div>
                    </li>
                
                    <li>
                        
                        

                        <div class="ui-tooltip bottom rounded-full"  data-tooltip="关于 About">
                            <a href="/about/about/" 
                                draggable="false"
                                
                                    class="ui-button-concealed ui-interactive ui-menu-item"
                                
                                
                                >
                                
                                    <i class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-heart-icon lucide-file-heart"><path d="M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10.29 10.7a2.43 2.43 0 0 0-2.66-.52c-.29.12-.56.3-.78.53l-.35.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L6.5 18l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"/></svg></i>
                                
                            </a>
                            
                            
                        </div>
                    </li>
                
                    <li>
                        
                        

                        <div class="ui-tooltip bottom rounded-full"  data-tooltip="搜索 Search">
                            <a href="/search/" 
                                draggable="false"
                                
                                    class="ui-button-concealed ui-interactive ui-menu-item"
                                
                                
                                >
                                
                                    <i class="icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21 21L15.8033 15.8033M15.8033 15.8033C17.1605 14.4461 18 12.5711 18 10.5C18 6.35786 14.6421 3 10.5 3C6.35786 3 3 6.35786 3 10.5C3 14.6421 6.35786 18 10.5 18C12.5711 18 14.4461 17.1605 15.8033 15.8033Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</i>
                                
                            </a>
                            
                            
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>
</nav>


<div class="fixed inset-0 z-[9999] 
            opacity-0 invisible
            transition-all duration-200 ease-in-out
            flex items-center justify-center pointer-events-none"
     id="theme-menu">
    
    
    <div class="ui-card ui-panel-material p-4 w-full max-w-xs relative pointer-events-auto">
        
        
        <div class="flex justify-between items-center mb-4">
            <div class="flex items-center gap-0.5">
                <h3 class="text-sm font-semibold">主题设置</h3>
                <div class="ui-tooltip rounded-full" data-tooltip="自动主题切换">
                    <button class="ui-button-concealed ui-interactive rounded-full p-1 selected" id="auto-theme-toggle" >
                        <i class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-moon-icon lucide-sun-moon"><path d="M12 8a2.83 2.83 0 0 0 4 4 4 4 0 1 1-4-4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.9 4.9 1.4 1.4"/><path d="m17.7 17.7 1.4 1.4"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.3 17.7-1.4 1.4"/><path d="m19.1 4.9-1.4 1.4"/></svg>
</i>
                    </button>
                </div>
                <div class="ui-tooltip rounded-full" data-tooltip="随机主题色">
                    <div class="ui-button-concealed ui-interactive rounded-full p-1" id="random-color-theme">
                        <i class="icon p-[2.2px]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shuffle-icon lucide-shuffle"><path d="m18 14 4 4-4 4"/><path d="m18 2 4 4-4 4"/><path d="M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22"/><path d="M2 6h1.972a4 4 0 0 1 3.6 2.2"/><path d="M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45"/></svg></i>
                    </div>
                </div>
            </div>
            <label for="theme-menu-toggle" class="ui-button-concealed ui-interactive rounded-full p-1">
                <div class="size-6"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" >
  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
</svg>
</div>
            </label>
        </div>

       <div class="flex gap-2 mb-4"><div class="ui-tooltip flex-1" data-tooltip="浅色模式 Light" >
                <button class="data-theme-btn ui-button-concealed ui-interactive p-2 flex flex-col items-center gap-1 w-full" data-theme-mode="light">
                    <span class="size-4 inline-block"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
</svg>
</span>
                    <span class="text-xs">Light</span>
                </button>
            </div><div class="ui-tooltip flex-1" data-tooltip="深色模式 Dark" >
                <button class="data-theme-btn ui-button-concealed ui-interactive p-2 flex flex-col items-center gap-1 w-full" data-theme-mode="dark">
                    <span class="size-4 inline-block"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
</svg>
</span>
                    <span class="text-xs">Dark</span>
                </button>
            </div></div>

        
        <div class="grid grid-cols-3 gap-2" id="color-theme-grid">
            
        </div>
    </div>
</div>
      <div class="pt-4 flex flex-col justify-between ui-main-content">
        <div class="ui-grid">
          <aside class="ui-grid-left">
            <div class="ui-content">
    

</div>
          </aside>

          <main class="ui-grid-main"><article class="">

    <div class="ui-card mb-4">
        



<figure class="relative min-h-20">
  <div title="" class="block w-full ui-no-image">
    
  </div>
</figure>

        <header class="ui-header p-4">
            <h1 class="text-2xl">11 Express</h1>
        </header>
    
        <div class="ui-body p-4">










<div class="content-isolation-wrapper markdown">
    <h1 id="express">Express</h1>
<p><em><a href="https://www.expressjs.com.cn">Express</a></em> 是基于Node.js 平台的一个快速、开放、极简的 Web 开发框架，基于内置的 http 模块进一步封装出来，能够极大地提高开发效率。其本质就是一个 npm 上的第三方包，提供了快速创建 Web 服务器的便捷方法。</p>
<p>对于前端程序员来说，最常见的两种服务器，分别是</p>
<ol>
<li>Web <strong>网站</strong> 服务器：专门对外提供 Web 网页资源的服务器</li>
<li>API <strong>接口</strong> 服务器：专门对外提供 API 接口的服务器</li>
</ol>
<p>使用 Express ，我们可以方便、快速的创建 Web 网站的服务器或 API 接口的服务器。</p>
<h2 id="使用">使用</h2>
<h3 id="安装">安装</h3>
<p>安装 Express 并将其保存到依赖列表中。如下：</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ npm install express</span></span></code></pre></div></div>
</div>
<h3 id="创建">创建</h3>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>  <span class="c1">// 导入express
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span> <span class="c1">// 创建web服务器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>       <span class="c1">// 调用listen() 启动服务器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;express server running at http://127.0.0.1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span></span></span></code></pre></div>
</div>
<h3 id="处理">处理</h3>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 参数1: 客户请求的url地址
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 参数2: 请求对应的处理器
</span></span></span><span class="line"><span class="cl"><span class="cm"> *    req: 请求对象
</span></span></span><span class="line"><span class="cl"><span class="cm"> *    res: 响应对象 两者包含了与响应相关的属性与方法
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*处理函数*/</span> <span class="p">})</span> <span class="c1">// 监听 GET 请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*处理函数*/</span> <span class="p">})</span> <span class="c1">// 监听 POST 请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="c1">// 通过 req.query 对象，可以访问到客户端通过查询字符串的形式，发送到服务器的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1">// 通过 req.params 对象，可以访问到 URL 中，通过 : 匹配到的动态参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1">// 响应客户端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="c1">// 通过 res.send()方法，把处理好的内容发送给客户端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span> <span class="c1">// 1. 导入 express
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span> <span class="c1">// 2. 创建 web 服务器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// 4. 监听客户端的 GET 和 POST 请求，并向客户端响应具体的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 调用 express 提供的 res.send() 方法，向客户端响应一个 JSON 对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;zs&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">gender</span><span class="o">:</span> <span class="s1">&#39;男&#39;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 调用 express 提供的 res.send() 方法，向客户端响应一个 文本字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;请求成功&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 通过 req.query 可以获取到客户端发送过来的 查询参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 注意：默认情况下，req.query 是一个空对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 注意：这里的 :id 是一个动态的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user/:ids/:username&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// req.params 是动态匹配到的 URL 参数，默认也是一个空对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 3. 启动 web 服务器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;express server running at http://127.0.0.1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h3 id="nodemon"><em>nodemon</em></h3>
<p>在编写调试 Node.js 项目的时候，如果修改了项目的代码，需要频繁的手动重新启动服务，使用 nodemon <a href="https://www.npmjs.com/package/nodemon">https://www.npmjs.com/package/nodemon</a> 工具，它能够监听项目文件的变动，当代码被修改后，nodemon 会自动重启项目，极大方便了开发和调试。</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm i -g nodemon</span></span></code></pre></div></div>
</div>
<p>现在，我们可以将 node 命令替换为 nodemon 命令，使用 <code>nodemon app.js</code> 来启动项目。</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">nodemon app.js</span></span></code></pre></div></div>
</div>
<h2 id="方法">方法</h2>
<h3 id="req"><code>req</code></h3>
<h4 id="query"><code>query</code></h4>
<p>通过 <code>req.query</code> 对象，可以访问到客户端通过 查询字符串*^get^* 的形式，发送到服务器的参数。</p>
<p>默认情况下，<code>req.query</code> 是一个空对象。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/search&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// req.query 默认是一个空对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 客户端使用 ?word="abc&amp;pages=20" 发送get请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 可以通过 req.query 对象访问到
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// e.g. req.query.name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">query</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">test</span><span class="o">:</span> <span class="kc">undefined</span> <span class="c1">// 似乎并不会返回空的键值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// http://127.0.0.1/search?word="abc&amp;pages=20"
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// {&#34;query&#34;:{&#34;word&#34;:&#34;abc&#34;,&#34;pages&#34;:&#34;20&#34;}}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span></span></span></code></pre></div>
</div>
<h4 id="param"><code>param</code></h4>
<p>使用 <code>:</code> 支持动态参数，通过 <code>req.param</code> 访问。如 <code>/user/:id</code> 匹配 <code>/user/3</code> 、<code>/user/:ids/:name</code> 匹配 <code>/user/3/jack</code> ⇒ <code>{ids:'3', name:jack}</code> 。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 注意：这里的 :id 是一个动态的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user/:ids/:username&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// req.params 是动态匹配到的 URL 参数，默认是一个空对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h3 id="express-1"><code>express</code></h3>
<h4 id="static"><code>static</code></h4>
<p><strong>托管静态资源</strong></p>
<p>Express 提供了一个非常好用的函数，叫做 <code>express.static()</code> ，通过它，我们可以非常方便地创建一个静态资源服务器，例如，通过如下代码就可以将 <code>public</code> 目录下的图片、CSS 文件、JavaScript 文件对外开放访问了。</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">statis</span><span class="p">(</span><span class="s1">&#39;public&#39;</span><span class="p">))</span></span></span></code></pre></div></div>
</div>
<p>现在，你就可以访问 <strong>public</strong> 目录中的所有文件了。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">http</span><span class="o">:</span><span class="c1">//localhost/images/bg.jpg
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="o">:</span><span class="c1">//localhost/css/style.css
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="o">:</span><span class="c1">//localhost/js/login.js
</span></span></span></code></pre></div>
</div>
<p><kbd>:memo: <em>Note</em></kbd> Express 在指定的静态目录中查找文件，对外提供资源访问路径，目录名 <strong>不会</strong> 出现在 URL 中</p>
<p><strong>托管多个静态资源目录</strong></p>
<p>访问静态资源文件时，<code>express.static()</code> 函数会根据目录的添加顺序查找所需的文件，如下同名则先访问 <code>public</code> 文件夹。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">statis</span><span class="p">(</span><span class="s1">&#39;public&#39;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">statis</span><span class="p">(</span><span class="s1">&#39;files&#39;</span><span class="p">));</span></span></span></code></pre></div>
</div>
<p><strong>挂载路径前缀</strong></p>
<p>如果希望在托管的静态资源访问路径之前，挂载路径前缀，则可以使用如下的方式。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/public&#39;</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="nx">statis</span><span class="p">(</span><span class="s1">&#39;public&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ?可以理解为 app.method(path, handler())
</span></span></span><span class="line"><span class="cl"><span class="c1">// 此时 express.statis 只对指定的 path 生效
</span></span></span></code></pre></div>
</div>
<p>现在，你就可以通过带有 /<strong>public</strong> 前缀地址来访问 <strong>public</strong> 目录中的文件了</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">http</span><span class="o">:</span><span class="c1">//localhost:3000/public/images/kitten.jpg
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="o">:</span><span class="c1">//localhost:3000/public/css/style.css
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="o">:</span><span class="c1">//localhost:3000/public/js/app.js
</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 在这里，调用 express.static() 方法，快速的对外提供静态资源
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/files&#39;</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="s1">&#39;./files&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="s1">&#39;./clock&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;express server running at http://127.0.0.1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h2 id="路由">路由</h2>
<p>广义上来讲，路由就是 映射关系*^Mapping^* 。在 Express 中，路由指的是 客户端*^client^* 的请求与 服务器*^server^* 处理函数之间的映射关系。</p>
<p>Express 中的路由分 3 部分组成，分别是 请求的类型*^Method^* 、请求的 URL 地址*^Path^<em>、处理函数</em>^Handle^* ，格式如下：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">method</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">handler</span><span class="p">())</span> <span class="c1">// method 具体为 get post 等
</span></span></span></code></pre></div>
</div>
<h3 id="匹配">匹配</h3>
<p>每当一个请求到达服务器之后，需要先经过路由的匹配，只有匹配成功之后，才会调用对应的处理函数。</p>
<p>在匹配时，会按照路由的顺序进行匹配，如果请求类型和请求的 URL 同时匹配成功，则 Express 会将这次请求，转交给对应的 <em>function</em> 函数进行处理。</p>
<div class="ui-htmlblock-container"><img width='95%' src='data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsbGVkYnk9ImNoYXJ0LXRpdGxlLWdyYXBoLWRpdiBjaGFydC1kZXNjLWdyYXBoLWRpdiIgcm9sZT0iaW1nIiB2aWV3Qm94PSIwIDAgNzg4LjM5MDYyNSA0ODEiIHN0eWxlPSJtYXgtd2lkdGg6IDEwMCU7IiBjbGFzcz0ic3RhdGVkaWFncmFtIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBpZD0iZ3JhcGgtZGl2IiBoZWlnaHQ9IjEwMCUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48c3R5bGU+QGltcG9ydCB1cmwoImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjIuMC9jc3MvYWxsLm1pbi5jc3MiKTsnPC9zdHlsZT48dGl0bGUgaWQ9ImNoYXJ0LXRpdGxlLWdyYXBoLWRpdiI+PC90aXRsZT48ZGVzYyBpZD0iY2hhcnQtZGVzYy1ncmFwaC1kaXYiPjwvZGVzYz48c3R5bGU+I2dyYXBoLWRpdiB7Zm9udC1mYW1pbHk6InRyZWJ1Y2hldCBtcyIsdmVyZGFuYSxhcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxNnB4O2ZpbGw6IzMzMzt9I2dyYXBoLWRpdiAuZXJyb3ItaWNvbntmaWxsOiM1NTIyMjI7fSNncmFwaC1kaXYgLmVycm9yLXRleHR7ZmlsbDojNTUyMjIyO3N0cm9rZTojNTUyMjIyO30jZ3JhcGgtZGl2IC5lZGdlLXRoaWNrbmVzcy1ub3JtYWx7c3Ryb2tlLXdpZHRoOjJweDt9I2dyYXBoLWRpdiAuZWRnZS10aGlja25lc3MtdGhpY2t7c3Ryb2tlLXdpZHRoOjMuNXB4O30jZ3JhcGgtZGl2IC5lZGdlLXBhdHRlcm4tc29saWR7c3Ryb2tlLWRhc2hhcnJheTowO30jZ3JhcGgtZGl2IC5lZGdlLXBhdHRlcm4tZGFzaGVke3N0cm9rZS1kYXNoYXJyYXk6Mzt9I2dyYXBoLWRpdiAuZWRnZS1wYXR0ZXJuLWRvdHRlZHtzdHJva2UtZGFzaGFycmF5OjI7fSNncmFwaC1kaXYgLm1hcmtlcntmaWxsOiMzMzMzMzM7c3Ryb2tlOiMzMzMzMzM7fSNncmFwaC1kaXYgLm1hcmtlci5jcm9zc3tzdHJva2U6IzMzMzMzMzt9I2dyYXBoLWRpdiBzdmd7Zm9udC1mYW1pbHk6InRyZWJ1Y2hldCBtcyIsdmVyZGFuYSxhcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxNnB4O30jZ3JhcGgtZGl2IGRlZnMgI3N0YXRlZGlhZ3JhbS1iYXJiRW5ke2ZpbGw6IzMzMzMzMztzdHJva2U6IzMzMzMzMzt9I2dyYXBoLWRpdiBnLnN0YXRlR3JvdXAgdGV4dHtmaWxsOiM5MzcwREI7c3Ryb2tlOm5vbmU7Zm9udC1zaXplOjEwcHg7fSNncmFwaC1kaXYgZy5zdGF0ZUdyb3VwIHRleHR7ZmlsbDojMzMzO3N0cm9rZTpub25lO2ZvbnQtc2l6ZToxMHB4O30jZ3JhcGgtZGl2IGcuc3RhdGVHcm91cCAuc3RhdGUtdGl0bGV7Zm9udC13ZWlnaHQ6Ym9sZGVyO2ZpbGw6IzEzMTMwMDt9I2dyYXBoLWRpdiBnLnN0YXRlR3JvdXAgcmVjdHtmaWxsOiNFQ0VDRkY7c3Ryb2tlOiM5MzcwREI7fSNncmFwaC1kaXYgZy5zdGF0ZUdyb3VwIGxpbmV7c3Ryb2tlOiMzMzMzMzM7c3Ryb2tlLXdpZHRoOjE7fSNncmFwaC1kaXYgLnRyYW5zaXRpb257c3Ryb2tlOiMzMzMzMzM7c3Ryb2tlLXdpZHRoOjE7ZmlsbDpub25lO30jZ3JhcGgtZGl2IC5zdGF0ZUdyb3VwIC5jb21wb3NpdHtmaWxsOndoaXRlO2JvcmRlci1ib3R0b206MXB4O30jZ3JhcGgtZGl2IC5zdGF0ZUdyb3VwIC5hbHQtY29tcG9zaXR7ZmlsbDojZTBlMGUwO2JvcmRlci1ib3R0b206MXB4O30jZ3JhcGgtZGl2IC5zdGF0ZS1ub3Rle3N0cm9rZTojYWFhYTMzO2ZpbGw6I2ZmZjVhZDt9I2dyYXBoLWRpdiAuc3RhdGUtbm90ZSB0ZXh0e2ZpbGw6YmxhY2s7c3Ryb2tlOm5vbmU7Zm9udC1zaXplOjEwcHg7fSNncmFwaC1kaXYgLnN0YXRlTGFiZWwgLmJveHtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MDtmaWxsOiNFQ0VDRkY7b3BhY2l0eTowLjU7fSNncmFwaC1kaXYgLmVkZ2VMYWJlbCAubGFiZWwgcmVjdHtmaWxsOiNFQ0VDRkY7b3BhY2l0eTowLjU7fSNncmFwaC1kaXYgLmVkZ2VMYWJlbCAubGFiZWwgdGV4dHtmaWxsOiMzMzM7fSNncmFwaC1kaXYgLmxhYmVsIGRpdiAuZWRnZUxhYmVse2NvbG9yOiMzMzM7fSNncmFwaC1kaXYgLnN0YXRlTGFiZWwgdGV4dHtmaWxsOiMxMzEzMDA7Zm9udC1zaXplOjEwcHg7Zm9udC13ZWlnaHQ6Ym9sZDt9I2dyYXBoLWRpdiAubm9kZSBjaXJjbGUuc3RhdGUtc3RhcnR7ZmlsbDojMzMzMzMzO3N0cm9rZTojMzMzMzMzO30jZ3JhcGgtZGl2IC5ub2RlIC5mb3JrLWpvaW57ZmlsbDojMzMzMzMzO3N0cm9rZTojMzMzMzMzO30jZ3JhcGgtZGl2IC5ub2RlIGNpcmNsZS5zdGF0ZS1lbmR7ZmlsbDojOTM3MERCO3N0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MS41O30jZ3JhcGgtZGl2IC5lbmQtc3RhdGUtaW5uZXJ7ZmlsbDp3aGl0ZTtzdHJva2Utd2lkdGg6MS41O30jZ3JhcGgtZGl2IC5ub2RlIHJlY3R7ZmlsbDojRUNFQ0ZGO3N0cm9rZTojOTM3MERCO3N0cm9rZS13aWR0aDoxcHg7fSNncmFwaC1kaXYgLm5vZGUgcG9seWdvbntmaWxsOiNFQ0VDRkY7c3Ryb2tlOiM5MzcwREI7c3Ryb2tlLXdpZHRoOjFweDt9I2dyYXBoLWRpdiAjc3RhdGVkaWFncmFtLWJhcmJFbmR7ZmlsbDojMzMzMzMzO30jZ3JhcGgtZGl2IC5zdGF0ZWRpYWdyYW0tY2x1c3RlciByZWN0e2ZpbGw6I0VDRUNGRjtzdHJva2U6IzkzNzBEQjtzdHJva2Utd2lkdGg6MXB4O30jZ3JhcGgtZGl2IC5jbHVzdGVyLWxhYmVsLCNncmFwaC1kaXYgLm5vZGVMYWJlbHtjb2xvcjojMTMxMzAwO30jZ3JhcGgtZGl2IC5zdGF0ZWRpYWdyYW0tY2x1c3RlciByZWN0Lm91dGVye3J4OjVweDtyeTo1cHg7fSNncmFwaC1kaXYgLnN0YXRlZGlhZ3JhbS1zdGF0ZSAuZGl2aWRlcntzdHJva2U6IzkzNzBEQjt9I2dyYXBoLWRpdiAuc3RhdGVkaWFncmFtLXN0YXRlIC50aXRsZS1zdGF0ZXtyeDo1cHg7cnk6NXB4O30jZ3JhcGgtZGl2IC5zdGF0ZWRpYWdyYW0tY2x1c3Rlci5zdGF0ZWRpYWdyYW0tY2x1c3RlciAuaW5uZXJ7ZmlsbDp3aGl0ZTt9I2dyYXBoLWRpdiAuc3RhdGVkaWFncmFtLWNsdXN0ZXIuc3RhdGVkaWFncmFtLWNsdXN0ZXItYWx0IC5pbm5lcntmaWxsOiNmMGYwZjA7fSNncmFwaC1kaXYgLnN0YXRlZGlhZ3JhbS1jbHVzdGVyIC5pbm5lcntyeDowO3J5OjA7fSNncmFwaC1kaXYgLnN0YXRlZGlhZ3JhbS1zdGF0ZSByZWN0LmJhc2lje3J4OjVweDtyeTo1cHg7fSNncmFwaC1kaXYgLnN0YXRlZGlhZ3JhbS1zdGF0ZSByZWN0LmRpdmlkZXJ7c3Ryb2tlLWRhc2hhcnJheToxMCwxMDtmaWxsOiNmMGYwZjA7fSNncmFwaC1kaXYgLm5vdGUtZWRnZXtzdHJva2UtZGFzaGFycmF5OjU7fSNncmFwaC1kaXYgLnN0YXRlZGlhZ3JhbS1ub3RlIHJlY3R7ZmlsbDojZmZmNWFkO3N0cm9rZTojYWFhYTMzO3N0cm9rZS13aWR0aDoxcHg7cng6MDtyeTowO30jZ3JhcGgtZGl2IC5zdGF0ZWRpYWdyYW0tbm90ZSByZWN0e2ZpbGw6I2ZmZjVhZDtzdHJva2U6I2FhYWEzMztzdHJva2Utd2lkdGg6MXB4O3J4OjA7cnk6MDt9I2dyYXBoLWRpdiAuc3RhdGVkaWFncmFtLW5vdGUgdGV4dHtmaWxsOmJsYWNrO30jZ3JhcGgtZGl2IC5zdGF0ZWRpYWdyYW0tbm90ZSAubm9kZUxhYmVse2NvbG9yOmJsYWNrO30jZ3JhcGgtZGl2IC5zdGF0ZWRpYWdyYW0gLmVkZ2VMYWJlbHtjb2xvcjpyZWQ7fSNncmFwaC1kaXYgI2RlcGVuZGVuY3lTdGFydCwjZ3JhcGgtZGl2ICNkZXBlbmRlbmN5RW5ke2ZpbGw6IzMzMzMzMztzdHJva2U6IzMzMzMzMztzdHJva2Utd2lkdGg6MTt9I2dyYXBoLWRpdiA6cm9vdHstLW1lcm1haWQtZm9udC1mYW1pbHk6InRyZWJ1Y2hldCBtcyIsdmVyZGFuYSxhcmlhbCxzYW5zLXNlcmlmO308L3N0eWxlPjxnPjxkZWZzPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlckhlaWdodD0iMTQiIG1hcmtlcldpZHRoPSIyMCIgcmVmWT0iNyIgcmVmWD0iMTkiIGlkPSJzdGF0ZWRpYWdyYW0tYmFyYkVuZCI+PHBhdGggZD0iTSAxOSw3IEw5LDEzIEwxNCw3IEw5LDEgWiI+PC9wYXRoPjwvbWFya2VyPjwvZGVmcz48ZyBjbGFzcz0icm9vdCI+PGcgY2xhc3M9ImNsdXN0ZXJzIj48ZyBpZD0i5LuO5LiK5Yiw5LiL6L+b6KGM5Yy56YWNIiBjbGFzcz0ic3RhdGVkaWFncmFtLXN0YXRlIHN0YXRlZGlhZ3JhbS1jbHVzdGVyIj48cmVjdCBoZWlnaHQ9IjQ2NSIgd2lkdGg9IjIxOS41MzEyNSIgeT0iOCIgeD0iMTY5IiBjbGFzcz0ib3V0ZXIiPjwvcmVjdD48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTQuNzY1NjI1LCA4KSIgY2xhc3M9ImNsdXN0ZXItbGFiZWwiPjxmb3JlaWduT2JqZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIxMjgiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj48c3BhbiBjbGFzcz0ibm9kZUxhYmVsIj7ku47kuIrliLDkuIvov5vooYzljLnphY08L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48cmVjdCBoZWlnaHQ9IjQzOCIgd2lkdGg9IjIxOS41MzEyNSIgeT0iMzEiIHg9IjE2OSIgY2xhc3M9ImlubmVyIj48L3JlY3Q+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZVBhdGhzIj48cGF0aCBtYXJrZXItZW5kPSJ1cmwoI3N0YXRlZGlhZ3JhbS1iYXJiRW5kKSIgc3R5bGU9ImZpbGw6bm9uZSIgY2xhc3M9ImVkZ2UtdGhpY2tuZXNzLW5vcm1hbCB0cmFuc2l0aW9uIiBpZD0iZWRnZTYiIGQ9Ik0zNDguMjYxNzE4NzUsNjIuNUwzNTQuOTczMzA3MjkxNjY2Nyw2Mi41QzM2MS42ODQ4OTU4MzMzMzMzLDYyLjUsMzc1LjEwODA3MjkxNjY2NjcsNjIuNSwzODguNjUyOTk0NzkxNjY2Nyw2Mi41QzQwMi4xOTc5MTY2NjY2NjY3LDYyLjUsNDE1Ljg2NDU4MzMzMzMzMzMsNjIuNSw0MjkuNTYyNSw2Mi41QzQ0My4yNjA0MTY2NjY2NjY3LDYyLjUsNDU2Ljk4OTU4MzMzMzMzMzMsNjIuNSw0NjMuODU0MTY2NjY2NjY2Nyw2Mi41TDQ3MC43MTg3NSw2Mi41Ij48L3BhdGg+PHBhdGggbWFya2VyLWVuZD0idXJsKCNzdGF0ZWRpYWdyYW0tYmFyYkVuZCkiIHN0eWxlPSJmaWxsOm5vbmUiIGNsYXNzPSJlZGdlLXRoaWNrbmVzcy1ub3JtYWwgdHJhbnNpdGlvbiIgaWQ9ImVkZ2U3IiBkPSJNMzQ4LjA3MDMxMjUsMTUxLjVMMzU0LjgxMzgwMjA4MzMzMzMsMTUxLjVDMzYxLjU1NzI5MTY2NjY2NjcsMTUxLjUsMzc1LjA0NDI3MDgzMzMzMzMsMTUxLjUsMzg4LjYyMTA5Mzc1LDE1MS41QzQwMi4xOTc5MTY2NjY2NjY3LDE1MS41LDQxNS44NjQ1ODMzMzMzMzMzLDE1MS41LDQyOS41OTQ0MDEwNDE2NjY3LDE1MS41QzQ0My4zMjQyMTg3NSwxNTEuNSw0NTcuMTE3MTg3NSwxNTEuNSw0NjQuMDEzNjcxODc1LDE1MS41TDQ3MC45MTAxNTYyNSwxNTEuNSI+PC9wYXRoPjxwYXRoIG1hcmtlci1lbmQ9InVybCgjc3RhdGVkaWFncmFtLWJhcmJFbmQpIiBzdHlsZT0iZmlsbDpub25lIiBjbGFzcz0iZWRnZS10aGlja25lc3Mtbm9ybWFsIHRyYW5zaXRpb24iIGlkPSJlZGdlOCIgZD0iTTM2My40MTAxNTYyNSwyNDAuNUwzNjcuNTk3MDA1MjA4MzMzMywyNDAuNUMzNzEuNzgzODU0MTY2NjY2NywyNDAuNSwzODAuMTU3NTUyMDgzMzMzMywyNDAuNSwzOTEuMTc3NzM0Mzc1LDI0MC41QzQwMi4xOTc5MTY2NjY2NjY3LDI0MC41LDQxNS44NjQ1ODMzMzMzMzMzLDI0MC41LDQyOS41NTE0MzIyOTE2NjY3LDI0MC41QzQ0My4yMzgyODEyNSwyNDAuNSw0NTYuOTQ1MzEyNSwyNDAuNSw0NjMuNzk4ODI4MTI1LDI0MC41TDQ3MC42NTIzNDM3NSwyNDAuNSI+PC9wYXRoPjxwYXRoIG1hcmtlci1lbmQ9InVybCgjc3RhdGVkaWFncmFtLWJhcmJFbmQpIiBzdHlsZT0iZmlsbDpub25lIiBjbGFzcz0iZWRnZS10aGlja25lc3Mtbm9ybWFsIHRyYW5zaXRpb24iIGlkPSJlZGdlOSIgZD0iTTM2My41MzEyNSwzMjkuNUwzNjcuNjk3OTE2NjY2NjY2NywzMjkuNUMzNzEuODY0NTgzMzMzMzMzMywzMjkuNSwzODAuMTk3OTE2NjY2NjY2NywzMjkuNSwzOTEuMTk3OTE2NjY2NjY2NywzMjkuNUM0MDIuMTk3OTE2NjY2NjY2NywzMjkuNSw0MTUuODY0NTgzMzMzMzMzMywzMjkuNSw0MjkuNTMxMjUsMzI5LjVDNDQzLjE5NzkxNjY2NjY2NjcsMzI5LjUsNDU2Ljg2NDU4MzMzMzMzMzMsMzI5LjUsNDYzLjY5NzkxNjY2NjY2NjcsMzI5LjVMNDcwLjUzMTI1LDMyOS41Ij48L3BhdGg+PHBhdGggbWFya2VyLWVuZD0idXJsKCNzdGF0ZWRpYWdyYW0tYmFyYkVuZCkiIHN0eWxlPSJmaWxsOm5vbmUiIGNsYXNzPSJlZGdlLXRoaWNrbmVzcy1ub3JtYWwgdHJhbnNpdGlvbiIgaWQ9ImVkZ2U1IiBkPSJNMTE5LDYyLjVMMTIzLjE2NjY2NjY2NjY2NjY3LDYyLjVDMTI3LjMzMzMzMzMzMzMzMzMzLDYyLjUsMTM1LjY2NjY2NjY2NjY2NjY2LDYyLjUsMTQ0LDYyLjVDMTUyLjMzMzMzMzMzMzMzMzM0LDYyLjUsMTYwLjY2NjY2NjY2NjY2NjY2LDYyLjUsMTY0LjgzMzMzMzMzMzMzMzM0LDYyLjVMMTY5LDYyLjUiPjwvcGF0aD48L2c+PGcgY2xhc3M9ImVkZ2VMYWJlbHMiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQyOS41MzEyNSwgNjIuNSkiIGNsYXNzPSJlZGdlTGFiZWwiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNiwgLTEyKSIgY2xhc3M9ImxhYmVsIj48cmVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMzIiIHJ5PSIwIiByeD0iMCI+PC9yZWN0Pjxmb3JlaWduT2JqZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIzMiI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPjxzcGFuIGNsYXNzPSJlZGdlTGFiZWwiPuWIhuWPkTwvc3Bhbj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MjkuNTMxMjUsIDE1MS41KSIgY2xhc3M9ImVkZ2VMYWJlbCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE2LCAtMTIpIiBjbGFzcz0ibGFiZWwiPjxyZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIzMiIgcnk9IjAiIHJ4PSIwIj48L3JlY3Q+PGZvcmVpZ25PYmplY3QgaGVpZ2h0PSIyNCIgd2lkdGg9IjMyIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+PHNwYW4gY2xhc3M9ImVkZ2VMYWJlbCI+5YiG5Y+RPC9zcGFuPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQyOS41MzEyNSwgMjQwLjUpIiBjbGFzcz0iZWRnZUxhYmVsIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYsIC0xMikiIGNsYXNzPSJsYWJlbCI+PHJlY3QgaGVpZ2h0PSIyNCIgd2lkdGg9IjMyIiByeT0iMCIgcng9IjAiPjwvcmVjdD48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMzIiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj48c3BhbiBjbGFzcz0iZWRnZUxhYmVsIj7liIblj5E8L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDI5LjUzMTI1LCAzMjkuNSkiIGNsYXNzPSJlZGdlTGFiZWwiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNiwgLTEyKSIgY2xhc3M9ImxhYmVsIj48cmVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMzIiIHJ5PSIwIiByeD0iMCI+PC9yZWN0Pjxmb3JlaWduT2JqZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIzMiI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPjxzcGFuIGNsYXNzPSJlZGdlTGFiZWwiPuWIhuWPkTwvc3Bhbj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZUxhYmVsIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLCAwKSIgY2xhc3M9ImxhYmVsIj48cmVjdCBoZWlnaHQ9IjAiIHdpZHRoPSIwIiByeT0iMCIgcng9IjAiPjwvcmVjdD48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjAiIHdpZHRoPSIwIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+PHNwYW4gY2xhc3M9ImVkZ2VMYWJlbCI+PC9zcGFuPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjwvZz48ZyBjbGFzcz0ibm9kZXMiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3OC43NjU2MjUsIDYyLjUpIiBpZD0ic3RhdGUtMS02IiBjbGFzcz0ibm9kZSBzdGF0ZWRpYWdyYW0tc3RhdGUiPjxyZWN0IGhlaWdodD0iMzkiIHdpZHRoPSIxMzguOTkyMTg3NSIgeT0iLTE5LjUiIHg9Ii02OS40OTYwOTM3NSIgc3R5bGU9IiIgY2xhc3M9ImJhc2ljIGxhYmVsLWNvbnRhaW5lciI+PC9yZWN0PjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MS45OTYwOTM3NSwgLTEyKSIgc3R5bGU9IiIgY2xhc3M9ImxhYmVsIj48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMTIzLjk5MjE4NzUiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj48c3BhbiBjbGFzcz0ibm9kZUxhYmVsIj5hcHAuZ2V0KCcvJywgZnVuQSk8L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjc4Ljc2NTYyNSwgMTUxLjUpIiBpZD0ic3RhdGUtMi03IiBjbGFzcz0ibm9kZSBzdGF0ZWRpYWdyYW0tc3RhdGUiPjxyZWN0IGhlaWdodD0iMzkiIHdpZHRoPSIxMzguNjA5Mzc1IiB5PSItMTkuNSIgeD0iLTY5LjMwNDY4NzUiIHN0eWxlPSIiIGNsYXNzPSJiYXNpYyBsYWJlbC1jb250YWluZXIiPjwvcmVjdD48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjEuODA0Njg3NSwgLTEyKSIgc3R5bGU9IiIgY2xhc3M9ImxhYmVsIj48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMTIzLjYwOTM3NSI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPjxzcGFuIGNsYXNzPSJub2RlTGFiZWwiPmFwcC5nZXQoJy8nLCBmdW5CKTwvc3Bhbj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNzguNzY1NjI1LCAyNDAuNSkiIGlkPSJzdGF0ZS0zLTgiIGNsYXNzPSJub2RlIHN0YXRlZGlhZ3JhbS1zdGF0ZSI+PHJlY3QgaGVpZ2h0PSIzOSIgd2lkdGg9IjE2OS4yODkwNjI1IiB5PSItMTkuNSIgeD0iLTg0LjY0NDUzMTI1IiBzdHlsZT0iIiBjbGFzcz0iYmFzaWMgbGFiZWwtY29udGFpbmVyIj48L3JlY3Q+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc3LjE0NDUzMTI1LCAtMTIpIiBzdHlsZT0iIiBjbGFzcz0ibGFiZWwiPjxmb3JlaWduT2JqZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIxNTQuMjg5MDYyNSI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPjxzcGFuIGNsYXNzPSJub2RlTGFiZWwiPmFwcC5nZXQoJy91c2VyJywgZnVuQyk8L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjc4Ljc2NTYyNSwgMzI5LjUpIiBpZD0ic3RhdGUtNC05IiBjbGFzcz0ibm9kZSBzdGF0ZWRpYWdyYW0tc3RhdGUiPjxyZWN0IGhlaWdodD0iMzkiIHdpZHRoPSIxNjkuNTMxMjUiIHk9Ii0xOS41IiB4PSItODQuNzY1NjI1IiBzdHlsZT0iIiBjbGFzcz0iYmFzaWMgbGFiZWwtY29udGFpbmVyIj48L3JlY3Q+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc3LjI2NTYyNSwgLTEyKSIgc3R5bGU9IiIgY2xhc3M9ImxhYmVsIj48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMTU0LjUzMTI1Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+PHNwYW4gY2xhc3M9Im5vZGVMYWJlbCI+YXBwLmdldCgnL3VzZXInLCBmdW5EKTwvc3Bhbj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNzguNzY1NjI1LCA0MTguNSkiIGlkPSJzdGF0ZS01LTYiIGNsYXNzPSJub2RlIHN0YXRlZGlhZ3JhbS1zdGF0ZSI+PHJlY3QgaGVpZ2h0PSIzOSIgd2lkdGg9Ijc5IiB5PSItMTkuNSIgeD0iLTM5LjUiIHN0eWxlPSIiIGNsYXNzPSJiYXNpYyBsYWJlbC1jb250YWluZXIiPjwvcmVjdD48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzIsIC0xMikiIHN0eWxlPSIiIGNsYXNzPSJsYWJlbCI+PGZvcmVpZ25PYmplY3QgaGVpZ2h0PSIyNCIgd2lkdGg9IjY0Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+PHNwYW4gY2xhc3M9Im5vZGVMYWJlbCI+5YW25a6D6Lev55SxPC9zcGFuPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYzLjUsIDYyLjUpIiBpZD0ic3RhdGUtSy02IiBjbGFzcz0ibm9kZSBzdGF0ZWRpYWdyYW0tc3RhdGUiPjxyZWN0IGhlaWdodD0iMzkiIHdpZHRoPSIxMTEiIHk9Ii0xOS41IiB4PSItNTUuNSIgc3R5bGU9IiIgY2xhc3M9ImJhc2ljIGxhYmVsLWNvbnRhaW5lciI+PC9yZWN0PjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00OCwgLTEyKSIgc3R5bGU9IiIgY2xhc3M9ImxhYmVsIj48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iOTYiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj48c3BhbiBjbGFzcz0ibm9kZUxhYmVsIj7lrqLmiLfnq6/nmoTor7fmsYI8L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjI1LjQ2MDkzNzUsIDYyLjUpIiBpZD0ic3RhdGUtYS02IiBjbGFzcz0ibm9kZSBzdGF0ZWRpYWdyYW0tc3RhdGUiPjxyZWN0IGhlaWdodD0iMzkiIHdpZHRoPSIzMDkuNDg0Mzc1IiB5PSItMTkuNSIgeD0iLTE1NC43NDIxODc1IiBzdHlsZT0iIiBjbGFzcz0iYmFzaWMgbGFiZWwtY29udGFpbmVyIj48L3JlY3Q+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0Ny4yNDIxODc1LCAtMTIpIiBzdHlsZT0iIiBjbGFzcz0ibGFiZWwiPjxmb3JlaWduT2JqZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIyOTQuNDg0Mzc1Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+PHNwYW4gY2xhc3M9Im5vZGVMYWJlbCI+ZnVuQShyZXEsIHJlcyl7Lyog5aSE55CG5bm25ZON5bqU6L+Z5qyh6K+35rGCICovfTwvc3Bhbj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MjUuNDYwOTM3NSwgMTUxLjUpIiBpZD0ic3RhdGUtYi03IiBjbGFzcz0ibm9kZSBzdGF0ZWRpYWdyYW0tc3RhdGUiPjxyZWN0IGhlaWdodD0iMzkiIHdpZHRoPSIzMDkuMTAxNTYyNSIgeT0iLTE5LjUiIHg9Ii0xNTQuNTUwNzgxMjUiIHN0eWxlPSIiIGNsYXNzPSJiYXNpYyBsYWJlbC1jb250YWluZXIiPjwvcmVjdD48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ3LjA1MDc4MTI1LCAtMTIpIiBzdHlsZT0iIiBjbGFzcz0ibGFiZWwiPjxmb3JlaWduT2JqZWN0IGhlaWdodD0iMjQiIHdpZHRoPSIyOTQuMTAxNTYyNSI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPjxzcGFuIGNsYXNzPSJub2RlTGFiZWwiPmZ1bkIocmVxLCByZXMpey8qIOWkhOeQhuW5tuWTjeW6lOi/measoeivt+axgiAqL308L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjI1LjQ2MDkzNzUsIDI0MC41KSIgaWQ9InN0YXRlLWMtOCIgY2xhc3M9Im5vZGUgc3RhdGVkaWFncmFtLXN0YXRlIj48cmVjdCBoZWlnaHQ9IjM5IiB3aWR0aD0iMzA5LjYxNzE4NzUiIHk9Ii0xOS41IiB4PSItMTU0LjgwODU5Mzc1IiBzdHlsZT0iIiBjbGFzcz0iYmFzaWMgbGFiZWwtY29udGFpbmVyIj48L3JlY3Q+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0Ny4zMDg1OTM3NSwgLTEyKSIgc3R5bGU9IiIgY2xhc3M9ImxhYmVsIj48Zm9yZWlnbk9iamVjdCBoZWlnaHQ9IjI0IiB3aWR0aD0iMjk0LjYxNzE4NzUiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj48c3BhbiBjbGFzcz0ibm9kZUxhYmVsIj5mdW5DKHJlcSwgcmVzKXsvKiDlpITnkIblubblk43lupTov5nmrKHor7fmsYIgKi99PC9zcGFuPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyNS40NjA5Mzc1LCAzMjkuNSkiIGlkPSJzdGF0ZS1kLTkiIGNsYXNzPSJub2RlIHN0YXRlZGlhZ3JhbS1zdGF0ZSI+PHJlY3QgaGVpZ2h0PSIzOSIgd2lkdGg9IjMwOS44NTkzNzUiIHk9Ii0xOS41IiB4PSItMTU0LjkyOTY4NzUiIHN0eWxlPSIiIGNsYXNzPSJiYXNpYyBsYWJlbC1jb250YWluZXIiPjwvcmVjdD48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ3LjQyOTY4NzUsIC0xMikiIHN0eWxlPSIiIGNsYXNzPSJsYWJlbCI+PGZvcmVpZ25PYmplY3QgaGVpZ2h0PSIyNCIgd2lkdGg9IjI5NC44NTkzNzUiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj48c3BhbiBjbGFzcz0ibm9kZUxhYmVsIj5mdW5EKHJlcSwgcmVzKXsvKiDlpITnkIblubblk43lupTov5nmrKHor7fmsYIgKi99PC9zcGFuPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg="="' /></div>
<p><kbd>:memo: <em>Note</em></kbd> 匹配规则</p>
<ol>
<li>按照定义的先后顺序进行匹配</li>
<li>请求类型和请求的 URL 同时匹配成功，才会调用对应的处理函数</li>
</ol>
<h3 id="使用-1">使用</h3>
<p>在 Express 中使用路由最简单的方式，就是把路由挂载到 <code>app</code> 上，示例代码如下：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 挂载路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;hello world.&#39;</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Post Request.&#39;</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;express server running at http://127.0.0.1&#39;</span><span class="p">)});</span></span></span></code></pre></div>
</div>
<h3 id="模块化">模块化</h3>
<p>为了方便对路由进行模块化的管理，Express 不建议将路由直接挂载到 <code>app</code> 上，而是推荐将路由抽离为单独的模块。将路由抽离为单独模块的步骤如下：</p>
<ol>
<li>创建路由模块对应的 <code>.js</code> 文件</li>
<li>调用 <code>express.Router()</code> 函数创建路由对象</li>
<li>向路由对象上挂载具体的路由</li>
<li>使用 <code>module.exports</code> 向外共享路由对象</li>
<li>使用 <code>app.use()</code> 函数注册路由模块</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 路由模块 router.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span> <span class="c1">// 1. 导入 express
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">()</span>   <span class="c1">// 2. 创建路由对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// 3. 挂载具体的路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user/list&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Get user list.&#39;</span><span class="p">)})</span>
</span></span><span class="line"><span class="cl"><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/user/add&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Add new user.&#39;</span><span class="p">)})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 4. 向外导出路由对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./router&#39;</span><span class="p">)</span> <span class="c1">// 1. 导入路由模块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 注意： app.use() 函数的作用，就是来注册全局中间件
</span></span></span><span class="line"><span class="cl"><span class="c1">// app.use(&#39;/files&#39;, express.static(&#39;./files&#39;))
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="nx">router</span><span class="p">)</span> <span class="c1">// 访问：/api/user/list
</span></span></span><span class="line"><span class="cl"><span class="c1">// 2. 注册路由模块，跟使用静态资源一样可以加统一的访问前缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1&#39;</span><span class="p">)})</span></span></span></code></pre></div>
</div>
<h2 id="中间件">中间件</h2>
<p>中间件*^Middleware^* ，特指业务流程的中间处理环节。</p>
<h3 id="流程">流程</h3>
<p>当一个请求到达 Express 的服务器之后，可以连续调用多个中间件，从而对这次请求进行 <strong>预处理</strong> <em>^preprocessing^</em> 。</p>
<div class="ui-htmlblock-container"><img width="45%" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBEbyBub3QgZWRpdCB0aGlzIGZpbGUgd2l0aCBlZGl0b3JzIG90aGVyIHRoYW4gZGlhZ3JhbXMubmV0IC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjMwMXB4IiBoZWlnaHQ9IjE4MXB4IiB2aWV3Qm94PSItMC41IC0wLjUgMzAxIDE4MSIgY29udGVudD0iJmx0O214ZmlsZSBob3N0PSZxdW90O0VsZWN0cm9uJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjItMTEtMTFUMTM6MTg6MTEuNTI2WiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgZHJhdy5pby8yMC4zLjAgQ2hyb21lLzEwNC4wLjUxMTIuMTE0IEVsZWN0cm9uLzIwLjEuMyBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7MjlHYWVUQlFFUVFHVHo5MFhFNkkmcXVvdDsgdmVyc2lvbj0mcXVvdDsyMC4zLjAmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7NkE3bU1BZndVMDJBRmszRndDTTYmcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7NVZwTms1czRFUDAxcXV3ZXhnVUNZWEVFYkc4dVc1V3FxZHBNamhxanNka0Z4QW9jMi9uMUs0R3crWkJqWm1Oc1VwbkRGR29KZ2Q1NzNXbzFCbGFRSFA3Z0pOdit5VUlhQTJpRUIyQXRBSVRtSEluLzBuQ3NETEEyYkhnVXFqRm53M1AwalNxam9heTdLS1I1YTJEQldGeEVXZHU0Wm1sSzEwWExSamhuKy9hd054YTNuNXFSRGUwWm50Y2s3bHMvUjJHeHJhd1lHV2Y3UnhwdHR2V1RUVVAxSktRZXJBejVsb1JzM3pCWlMyQUZuTEdpdWtvT0FZMGxkalV1MVgyckM3Mm5GK00wTFliY3NQMzI4dkh2Wk8vOTlSbUZDYlQ1eXk2RFQycVdyeVRlcVFXcmx5Mk9OUUtjN2RLUXlra01ZUG43YlZUUTU0eXNaZTllVUM1czJ5S0pSY3NVbDJvNnlndDZ1UGllNW1uMVFqV1VKYlRnUnpGRTNRQ3hBa3dweG5KVmUzL0czMWFtYlJQNnVUSVNSZm5tTlBVWkZYR2hnSGtIU0xBUDBoSUJid2s4WVhaaThYei9sWXVyamJ3Q1N3ZGdEUHk1cm1zT1BCOTRxeDdHQXEyaURXUmVjUFlQRFZqTXVMQ2tMQlVqL2Jjb2pqc21Fa2ViVkRUWEFsMHE3TDdFUGhMNjlWUkhFb1doZkl5V3VUYTN0eURQYlpObjIzM3lvSWE4MGJpenBpZHd5K2xnWkdndzBvRmtPbU9oWkdzVWpxVlFoWXlGbm4wVDRENXUweER0RzBzTHRXMllOeEt4QlRzRXdXRVJDSTVGei95NmlEY0NsZXppMnRYdVNGN3I0Y2E3TWVsRVpkdnNZNEkxbUl3bVdUVEFzYmNzZWQzbE4zTHF5OHowUVhzVUtJN0dqMjNnQzFkZWdLVUwzRG53N2RMaUE5OHhKK3JSTjJlam5xV3RZQlAxQk94b3VMTEc0Z28vM3FudHFUbTFPd21ueHROeTZwcVVYOVdyTDlBeFRhK0dBeEpPbW9hZVBKcEtaR09TNTlHNlRVOGJPSHFJaWhmWk16Tk1xTnBmWk44TXVsaTFGNGZHNE1XeDBmaEVlU1JXSnRscjBFREQzcW4zaDMwQ2FXQ3ViWnpHcElpK3RwK3B3MTQ5NFJPTHhOdWNPSDdxSkdTV01iT2hlL3JEbHRPZU1XYzd2cVpxa3VhUnVKNzNxRmRCUWZpR0ZyMzdTaUdjRnYwRGpqemd0SDMza0s4NVhkODN1bWxPMXcrSStlWUYyQjRHaXlhTy9FcEIveElmMDR6NnB1YUVKa3RFTnNDMnJQb0lKOFBPejh6UmxhQmlkNEtLODJnK0JpU1NFOStGYTVjdXQ3THZMZldSRzdQVkpkNXlaN2d6eTlYTitGS0ZRVFBYeUJzMDFHelFmVGV1YXI4NGtKVXhid1ZjQkpZcjRBZlNvaW41SXVCYUFDL2toZThCMTVhRk5WL2M1WmEzQjhBekI1VGF6bG8wNzFPaXJML1NuTElFWndiN1B1MXFsR1hQWjJna3I0WURhajd2OU9wVXZOZUw2aW9ibFUranVubDI2YkxWOU9tWHhuWGpyb3R4NEpZK3I5WmR1Y05WUVQ4cU9pQ2o3ZEZPTjk0UERRMEl0U2RDK0w2Sk85VFUxVzRrdkliV3ZyU2twaGZlY0JGZDFVWWxvb2RwbzF0ajczNEJHcXlOZVdlaWJoVitiRzBNcU9QOURLbkd3MUtJemxhRFRIZUc4UDlNSVRxaVF2ZldnaWJ0N0NjQTB6d0czT0U3R3RKODZMenJkN1I2LzJud3N6eGtuT2E1VEwzY1FOR0V2VElyUXpKSjgvQUlmTVgwclpnZVc1M1AwcWQ4L0VvSlpEeTIrdGs0eWJMWkxxZS9OUlB0QmpYT3Z6djVhNW9TbmFlOGhNY1RBNXpzVUVKVWQ1K1NjK2lRUkdLYnZ1WloyUlp3aWFYQ1FDNlJwSUlNZnBzbi9UNTFFVG1xdVNKSkZFc0JmRmhGbkloWERsaElQMVNJSkN4bGVUWGZiWW9HWmx0djdyeW5OK1QyOVdaWjc5YWJhSjUvWjFVRisvT1AxYXpsZnc9PSZsdDsvZGlhZ3JhbSZndDsmbHQ7L214ZmlsZSZndDsiPjxkZWZzLz48Zz48cmVjdCB4PSIwIiB5PSIxMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjE3MCIgZmlsbD0icmdiKDI1NSwgMjU1LCAyNTUpIiBzdHJva2U9InJnYigwLCAwLCAwKSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxyZWN0IHg9IjEwIiB5PSI2MCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjcwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA5NXB4OyBtYXJnaW4tbGVmdDogMTFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuWuojxiciAvPuaItzxiciAvPuerrzwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyMCIgeT0iOTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lrqLmiLfnq68uLi48L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjgwIiB5PSIyMCIgd2lkdGg9IjIyMCIgaGVpZ2h0PSIxNjAiIGZpbGw9InJnYigyNTUsIDI1NSwgMjU1KSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSI0MCIgeT0iNDAiIHdpZHRoPSI0MCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDM4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogNTBweDsgbWFyZ2luLWxlZnQ6IDQxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMHB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7or7fmsYI8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNjAiIHk9IjUzIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTBweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+6K+35rGCPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDE0MCAzMCBMIDE4MCA2MCBMIDE0MCA5MCBMIDEwMCA2MCBaIiBmaWxsPSJyZ2IoMjU1LCAyNTUsIDI1NSkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDU4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogNjBweDsgbWFyZ2luLWxlZnQ6IDExMXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuS4remXtOS7tjE8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTQwIiB5PSI2NCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuS4remXtOS7tjE8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMjQwIDMwIEwgMjgwIDYwIEwgMjQwIDkwIEwgMjAwIDYwIFoiIGZpbGw9InJnYigyNTUsIDI1NSwgMjU1KSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA2MHB4OyBtYXJnaW4tbGVmdDogMjExcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5Lit6Ze05Lu2MTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNDAiIHk9IjY0IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5Lit6Ze05Lu2MTwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAxODAgNjAuNDMgTCAxOTMuNjMgNjAuMTQiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAxOTguODggNjAuMDIgTCAxOTEuOTYgNjMuNjcgTCAxOTMuNjMgNjAuMTQgTCAxOTEuODEgNTYuNjggWiIgZmlsbD0icmdiKDAsIDAsIDApIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQwIDExMCBMIDI4MCAxNDAgTCAyNDAgMTcwIEwgMjAwIDE0MCBaIiBmaWxsPSJyZ2IoMjU1LCAyNTUsIDI1NSkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDU4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTQwcHg7IG1hcmdpbi1sZWZ0OiAyMTFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7kuK3pl7Tku7YxPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjI0MCIgeT0iMTQ0IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5Lit6Ze05Lu2MTwvdGV4dD48L3N3aXRjaD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDU4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTAwcHg7IG1hcmdpbi1sZWZ0OiAxNjFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7lpITnkIY8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTkwIiB5PSIxMDQiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lpITnkIY8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gNDAuNDggNjAuNjYgTCA5My42MyA1OS45IiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gOTguODggNTkuODMgTCA5MS45MyA2My40MyBMIDkzLjYzIDU5LjkgTCA5MS44MyA1Ni40MyBaIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHJlY3QgeD0iOTUiIHk9IjExNi4yNSIgd2lkdGg9IjkwIiBoZWlnaHQ9IjQ3LjUiIHJ4PSI3LjEzIiByeT0iNy4xMyIgZmlsbD0icmdiKDI1NSwgMjU1LCAyNTUpIiBzdHJva2U9InJnYigwLCAwLCAwKSIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogODhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxNDBweDsgbWFyZ2luLWxlZnQ6IDk2cHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5aSE55CG5a6M5q+V77yMPGJyIC8+5ZON5bqU6L+Z5qyh6K+35rGCPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjE0MCIgeT0iMTQ0IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5aSE55CG5a6M5q+V77yMJiN4YTvlk43lupTov5nmrKHor7fmsYI8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMjAwIDE0MCBMIDE5MS4zNyAxNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAxODYuMTIgMTQwIEwgMTkzLjEyIDEzNi41IEwgMTkxLjM3IDE0MCBMIDE5My4xMiAxNDMuNSBaIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAyNDAgOTAgTCAyNDAgMTAzLjYzIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMjQwIDEwOC44OCBMIDIzNi41IDEwMS44OCBMIDI0MCAxMDMuNjMgTCAyNDMuNSAxMDEuODggWiIgZmlsbD0icmdiKDAsIDAsIDApIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gOTUgMTM5LjU4IEwgNDYuMzcgMTM5Ljk1IiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gNDEuMTIgMTM5Ljk5IEwgNDguMDkgMTM2LjQ0IEwgNDYuMzcgMTM5Ljk1IEwgNDguMTQgMTQzLjQ0IFoiIGZpbGw9InJnYigwLCAwLCAwKSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMzhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMzBweDsgbWFyZ2luLWxlZnQ6IDQxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMHB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5ZON5bqUPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjYwIiB5PSIxMzMiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMHB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lk43lupQ8L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBmbGV4LXN0YXJ0OyB3aWR0aDogNzhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMHB4OyBtYXJnaW4tbGVmdDogODJweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMHB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+RXhwcmVzc+acjeWKoeWZqDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI4MiIgeT0iMTMiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMHB4Ij5FeHByZXNz5pyN5Yqh5ZmoPC90ZXh0Pjwvc3dpdGNoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgZmxleC1zdGFydDsgd2lkdGg6IDU3cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMzRweDsgbWFyZ2luLWxlZnQ6IDE2M3B4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDZweDsgZm9udC1mYW1pbHk6ICZxdW90O0ZpcmEgQ29kZSZxdW90OywgbW9ub3NwYWNlOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+YXBwLnVzZSg8YnIgc3R5bGU9ImZvbnQtc2l6ZTogNnB4OyIgLz7CoCBwYXRoLCBoYW5kbGVyPGJyIHN0eWxlPSJmb250LXNpemU6IDZweDsiIC8+KTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxNjMiIHk9IjM1IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSInRmlyYSBDb2RlJywgbW9ub3NwYWNlIiBmb250LXNpemU9IjZweCI+YXBwLnVzZSguLi48L3RleHQ+PC9zd2l0Y2g+PC9nPjwvZz48c3dpdGNoPjxnIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIvPjxhIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTUpIiB4bGluazpocmVmPSJodHRwczovL3d3dy5kaWFncmFtcy5uZXQvZG9jL2ZhcS9zdmctZXhwb3J0LXRleHQtcHJvYmxlbXMiIHRhcmdldD0iX2JsYW5rIj48dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwcHgiIHg9IjUwJSIgeT0iMTAwJSI+VGV4dCBpcyBub3QgU1ZHIC0gY2Fubm90IGRpc3BsYXk8L3RleHQ+PC9hPjwvc3dpdGNoPjwvc3ZnPg="="' /></div>
<h3 id="格式">格式</h3>
<p>Express 的中间件，本质上就是一个 <em>function</em> 处理函数，Express 中间件的格式如下：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">next</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
</div>
<ol>
<li><em>get</em> - 中间件应用的方法</li>
<li><em>&rsquo;/&rsquo;</em> - 应用的地址，使用通配符</li>
<li><em>handler</em> - 处理函数
<ul>
<li><em>req</em> - 请求参数*^request^*</li>
<li><em>res</em> - 响应参数*^response^*</li>
<li><em>next</em> - 回调函数，用于将流转关系转交给下一个中间件或路由，必须</li>
</ul>
</li>
</ol>
<p><kbd>:memo: <em>Note</em></kbd> 中间件函数的形参列表中，<strong>必须</strong> 包含 <code>next</code> 参数，而路由处理函数中只包含 <code>req</code> 和 <code>res</code> 。使用 <code>next()</code> 将控制权交给下一个中间件。</p>
<p><kbd>❓ <em>Question</em></kbd> 直接使用 <code>app.use()</code>  时并没有调用 <code>next()</code> 函数，是 <code>res.send()</code> 方法自动终止进程了吗？</p>
<p>全局生效的中间件：是指客户端发起的任何请求，达到服务器之后，都会触发的中间件；通过 <code>app.use</code>^中间件函数^ ，即可定义一个全局生效的中间件，兼容 get 与 post 方法。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 定义一个最简单的中间件函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">mw</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;这是最简单的中间件函数&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="c1">// 把流转关系，转交给下一个中间件或路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 将 mw 注册为全局生效的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">mw</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 这是定义全局中间件的简化形式
</span></span></span><span class="line"><span class="cl"><span class="c1">// app.use((req, res, next) =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="c1">//  console.log(&#39;这是最简单的中间件函数&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1">//  next()
</span></span></span><span class="line"><span class="cl"><span class="c1">// })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;调用了 / 这个路由&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Home page.&#39;</span><span class="p">);</span> <span class="c1">// 第一次发送响应时流程即结束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;调用了 /user 这个路由&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;User page.&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h3 id="共用">共用</h3>
<p>多个中间件之间，共享同一份 <code>req</code> 和 <code>res</code> 。基于这样的特性，我们可以在上游的中间件中，统一为 <code>req</code> 或 <code>res</code> 对象添加自定义的属性或方法，供下游的中间件或路由进行使用。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// 上游中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">time</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 获取到请求到达服务器的时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">req</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span> <span class="c1">// 为 req 对象，挂载自定义属性，从而把时间共享给后面的所有路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Home page.&#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">startTime</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;User page.&#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">startTime</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1&#39;</span><span class="p">)});</span></span></span></code></pre></div>
</div>
<p><strong>定义多个全局中间件</strong>﻿</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// 定义第一个全局中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;调用了第1个全局中间件&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">next</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">// 定义第二个全局中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;调用了第2个全局中间件&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">next</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;User page.&#39;</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1&#39;</span><span class="p">)});</span></span></span></code></pre></div>
</div>
<p>接收到访问请求时，中间件按挂载顺序执行，先打印第一句话，再打印第二句话。</p>
<h3 id="局部">局部</h3>
<p>第一个参数可以传入路径，此时中间件局在部生效。定义多个局部中间件：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 1. 定义中间件函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">mw1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;调用了局部生效的中间件&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">next</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">mw2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;调用了第二个局部生效的中间件&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">next</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 2. 创建路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">mw1</span><span class="p">,</span> <span class="nx">nw2</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Home page.&#39;</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">mw1</span><span class="p">,</span> <span class="nx">mw2</span><span class="p">],(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;User page.&#39;</span><span class="p">)});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Express server running at http://127.0.0.1&#39;</span><span class="p">)});</span></span></span></code></pre></div>
</div>
<p><kbd>📝 <em>Note</em></kbd> 注意事项</p>
<ol>
<li>一定要在路由之前注册中间件</li>
<li>客户端发送过来的请求，可以连续调用多个中间件进行处理</li>
<li>执行完中间件的业务代码之后，不要忘记调用 <code>next()</code> 函数</li>
<li>为了防止代码逻辑混乱，调用 <code>next()</code> 函数后不要再写额外的代码</li>
<li>连续调用多个中间件时，多个中间件之间，共享 <code>req</code> 和 <code>res</code> 对象</li>
</ol>
<h3 id="分类">分类</h3>
<p>为了方便大家理解和记忆中间件的使用，Express 官方把常见的中间件用法，分成了 5 大类：</p>
<ol>
<li>应用级别的中间件</li>
<li>路由级别的中间件</li>
<li>错误级别的中间件</li>
<li>Express 内置的中间件</li>
<li>第三方的中间件</li>
</ol>
<p><strong>应用</strong></p>
<p>通过 <code>app.method()</code><em>^use/get/post^</em> ，绑定到 <code>app</code> 实例上的中间件，叫做应用级别的中间件。</p>
<p><strong>路由</strong></p>
<p>绑定到 <code>express.Router()</code> 实例上的中间件，叫做路由级别的中间件。</p>
<p>它的用法和应用级别中间件没有任何区别。只不过，应用级别中间件是绑定到 <code>app</code> 实例上，路由级别中间件先是绑定到 <code>app.Router()</code> 创建的 <code>router</code> 实例上，再通过 <code>app.use</code> 绑定到主流程上。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 路由级别的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)=&gt;{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Time:&#39;</span> <span class="o">+</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"> <span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">experts</span> <span class="o">=</span> <span class="nx">router</span></span></span></code></pre></div>
</div>
<p><strong>错误捕获</strong></p>
<p>错误级别中间件的作用：专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃的问题。格式：错误级别中间件的 <code>function</code> 处理函数中，必须有 4 个形参，形参顺序从前到后，分别是 <code>err</code>, <code>req</code>, <code>res</code>, <code>next</code> 。</p>
<p><kbd>❗️ <em>Warning</em></kbd> 错误级别的中间件必须注册在所有路由之后</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 1. 定义路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="c1">// 1.1 人为的制造错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;服务器内部发生了错误！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Home page.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 2. 定义错误级别的中间件，捕获整个项目的异常错误，从而防止程序的崩溃
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;发生了错误！&#39;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Error：&#39;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Express server running at http://127.0.0.1&#39;</span><span class="p">)})</span></span></span></code></pre></div>
</div>
<p><strong>Express 内置的中间件</strong></p>
<p>自 Express 4.16.0 版本开始，Express 内置了 3 个常用的中间件，极大提高了 Express 项目的开发效率和体验。</p>
<ol>
<li><em>express.static()</em> - 快速托管 静态资源*^static^* 的内置中间件，例如： HTML 文件、图片、CSS 样式等</li>
<li><em>express.json()</em><sup> <em>4.16.0+</em></sup> - 解析 <em>JSON</em> 格式的请求体数据</li>
<li><em>express.urlencoded(option)</em><sup> <em>4.16.0+</em></sup> - 解析 URL-encoded 格式的请求体数据 - 即 POST 的表单内容</li>
</ol>
<p><kbd>📝 <em>Note</em></kbd> 实现上，2 和 3 这两个中间件都把解析的结果挂载在了 <code>req.body</code> 这个中间件上。因此，不配置中间件时，<code>req.body</code> 默认为 <code>undefined</code> ；没有任何数据可以被这两个中间件解析的时候，<code>req.body</code> 默认为 <code>{}</code> 。</p>
<p><kbd>⚠️ <em>Caution</em></kbd> 如果要获取 URL-encoded 格式的请求体数据，必须配置中间件 <code>app.use(express.urlencoded({extended:false}))</code> 。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 注意：除了错误级别的中间件，其他的中间件，必须在路由之前进行配置
</span></span></span><span class="line"><span class="cl"><span class="c1">// 1. 解析 application/json 格式数据的内置中间件
</span></span></span><span class="line"><span class="cl"><span class="c1">// 2. 解析 application/x-www-form-urlencoded 格式数据的内置中间件
</span></span></span><span class="line"><span class="cl"><span class="c1">// 两个中间件都会把
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 在服务器，可以使用 req.body 这个属性，来接收客户端发送过来的请求体数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 默认情况下，如果不配置解析表单数据的中间件，则 req.body 默认等于 undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// send: [name:zhangsan]  Content Type: application/x-www-form-urlencoded
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// [Object: null prototype] { name: &#39;zhangsan&#39; }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/book&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 在服务器端，可以通过 req,body 来获取 JSON 格式的表单数据和 url-encoded 格式的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// send: { &#34;name&#34;: &#34;book1&#34; }, Content Type: application/x-www-form-urlencoded
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// { name: &#39;book1&#39; }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 调用 app.listen 方法，指定端口号并启动web服务器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Express server running at http://127.0.0.1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p><kbd>📝 <em>Note</em></kbd> 可以通过 <code>Object.create(null)</code> 创建没有原型的对象以节省资源</p>
<p><strong>第三方的中间件</strong></p>
<p>指的是非 Express 官方内置的，由第三方开发出来的中间件。项目中，可以按需下载并配置第三方中间件，从而提高项目的开发效率。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">parser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">);</span> <span class="c1">// 1. 导入解析表单数据的中间件 body-parser
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">parser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}));</span> <span class="c1">// 2. 使用 app.use() 注册中间件
</span></span></span><span class="line"><span class="cl"><span class="c1">// app.use(express.urlencoded({ extended: false })) 新版 express 直接使用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="c1">// 如果没有配置任何解析表单数据的中间件，则 req.body 默认等于 undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p><kbd>📝 <em>Note</em></kbd> Express 内置的 <code>express.urlencoded</code> 中间件，就是基于 <code>body-parser</code> 这个第三方中间件进一步封装出来的。</p>
<p><strong>自定义中间件</strong></p>
<p>自己手动模拟一个类似于 <code>express.urlencoded</code> 这样的中间件，来解析 POST 提交到服务器的表单数据，实现步骤：</p>
<ol>
<li>
<p>定义中间件</p>
</li>
<li>
<p>监听 <code>req</code> 的 <code>data</code> 事件 - 获取客户端发送到服务器的数据</p>
<p>如果数据量比较大，无法一次性发送完毕，则客户端会把数据切割后，分批发送到服务器。所以 <code>data</code> 事件可能会触发多次，每一次触发 <code>data</code> 事件时，获取到数据只是完整数据的一部分，需要 <strong>手动对接收到的数据进行拼接</strong> 。</p>
</li>
<li>
<p>监听 <code>req</code> 的 <code>end</code> 事件</p>
<p>当请求体数据接收完毕之后，会自动触发 <code>req</code> 的 <code>end</code> 事件，可以在 <code>req</code> 的 <code>end</code> <code>事件</code>中，拿到并处理完整的请求体数据</p>
<p>Node.js 内置了一个 <code>querystring</code> 模块，专门用来处理查询字符串。通过这个模块提供的 <code>parse()</code> 函数，可以轻松把查询字符串解析成对象的格式</p>
</li>
<li>
<p>使用 <code>querystring</code> 模块解析请求体数据</p>
</li>
<li>
<p>将解析出来的数据对象挂载为 <code>req.body</code></p>
</li>
<li>
<p>将自定义中间件封装为模块</p>
</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 定义中间件具体的业务逻辑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 1. 定义一个 str 字符串，专门用来存储客户端发送过来的请求体数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 2. 监听 req 的 data 事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nx">chunk</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="nx">str</span> <span class="o">+=</span> <span class="nx">chunk</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 3. 监听 req 的 end 事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 在 str 中存放的是完整的请求体数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// console.log(str)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// TODO: 把字符串格式的请求体数据，解析成对象格式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">body</span>
</span></span><span class="line"><span class="cl">    <span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">bodyParser</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 1. 导入自己封装的中间件模块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">customBodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./14.custom-body-parser&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 2. 将自定义的中间件函数，注册为全局可用的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">customBodyParser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h2 id="跨域">跨域</h2>
<p>浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域。浏览器的 <strong>同源安全策略</strong> 默认会组织网页 <strong>跨域</strong> 获取资源。但如果接口服务器配置了 CORS 相关的 <strong>HTTP 响应头</strong> ，即可解决浏览器端的跨域访问限制。</p>
<div class="ui-htmlblock-container"><img width="90%" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBEbyBub3QgZWRpdCB0aGlzIGZpbGUgd2l0aCBlZGl0b3JzIG90aGVyIHRoYW4gZGlhZ3JhbXMubmV0IC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjY2N3B4IiBoZWlnaHQ9IjIxMnB4IiB2aWV3Qm94PSItMC41IC0wLjUgNjY3IDIxMiIgY29udGVudD0iJmx0O214ZmlsZSBob3N0PSZxdW90O0VsZWN0cm9uJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjItMTEtMTNUMDI6MTE6MTQuNTMzWiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgZHJhdy5pby8yMC4zLjAgQ2hyb21lLzEwNC4wLjUxMTIuMTE0IEVsZWN0cm9uLzIwLjEuMyBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7UVZSYWZ2T3FJanF1LWRnYVZsV2UmcXVvdDsgdmVyc2lvbj0mcXVvdDsyMC4zLjAmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7NkE3bU1BZndVMDJBRmszRndDTTYmcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1ZwdGI2TTRFUDQxMWtvblpjV2JlZmxvOG5LcjA2NzJwUDF3bnlrNENWZUNjNFpzMnYzMU56YUdBQ1l2MnladG1yYXFWQmdiajNtZW1mSE1VR1NQVnc5LzhtaTkvTVlTbWlITFNCNlFQVUdXWlpxV0RYK0U1RkZKUE5lckpBdWVKa3EyRS94SWYxRWxOSlIwa3lhMDZFd3NHY3ZLZE4wVnhpelBhVngyWkJIbmJOdWRObWRaVitzNldsQk44Q09PTWwzNlQ1cVV5MHJxWTJNbi8wTFR4YkxXYkJwcVpCWFZrNVdnV0VZSjI3WkU5aFRaWTg1WVdWMnRIc1kwRStqVnVGVFB6ZmFNTmh2ak5DOVBlU0QrOXhmL05zbURKRnZSdTY5Ryt0Y1htby9VS2oramJLTmVXRzIyZkt3UjRHeVRKMVFzWWlBNzNDN1RrdjVZUjdFWTNRTHBJRnVXcXd6dVRMaFV5MUZlMG9lOSt6U2J0d2U3b1d4RlMvNElVOVFEdnNKTFdZeGQzMjkzOERjZ0w5dlEyMG9ZS2NvWHpkSTdWT0JDQWZNYklGblhCNUxsWEIxS3RvN1MxRVVoUnY0TVRYMUVQT1Q3YUlwUkVDRGlhd0FDRkdVWHBhTGs3SjZPV2NZNFNIS1d3OHh3bm1aWlR4Umw2U0tIMnhpZ295QVBCYkFwZURCUkE2czBTWVNhUVZxNnhKMkJtUWIxbWhtc00rTU9FSE14WHB4Qlh2d3BJbGpRQWV3UVcwaUNNZkluVWtJUU1kOEJVeGJHUjVueVhwSXBkNEFwWU1GV3ZJUUVCUTZhZWlnZ3lKY1hZU2hHQlhkVFFaL3dNZ3VSOEpEZkNlcERSRng1QWFNRVRXY29CT3BoeTI0bWlMM2pjTFVRVjFMRkJBVmdESUV3Q1ZoVDZQSVFNYVFLR3dWWXFBQmJDajFsUzRFckpIQkxLcVV6OFh2b0xWeXhTQ2dYaEFsa2VydjIxanZZc0syYjI4dEdCdi80dVViemhJZ3NTcUNZUlVXUnhsMHFoa0NpaVpaU0hZV29oUUVlZ0tDV2NacEZaZnF6dS93UUxrckQzeXdGeGJ2WTNLUEFNWHZRRm16RFk2cWVhdWRTdllYNng2KzJVQm54QlMyMWhTUk56V3MvbmJsYVhZZTZ5bjNuVEc1MHg2SDczNGJWQTZOQ0p0Z0VKZ1RyQjhsWVBieHpldDE5SVU3TXBJdUQwNXZJYjNUQjNpdDE2bEhOZXNBU3ZrWjNVQk4wak9aMHYrUVVOaHpkeWZXRWdhMEZvQkppSENJOE9lU1hxaUJRRDZNbURXOGI0MzZ2Mk92RUkrT3o0WmxPaDMzcmVjWlpUMkh6ZVVFdllpN0JCYTFGQysybjJzWk5SUll0SVBoUGpDeGFpT292ZE9uSU1wREdINktPczZJNFJKeXdBVlhWQjNBTGo4NVNzYU5xc0hWbUk4dE9mTVB3Yk8yQWh4R0NEY041QzNad2xMNlQ3Y0I5WlRzNG9lZ3RsdEdheW5TcjNKZEV0ZXppTG9ydkY5STR2bS9LTEJVWm1wUW5FYi8vRGsrbHBYaFZDSzlZTjVzcUVFMU03ekkxbW1PY1ZxTUZsOHJFc0E2Mm5udmZiR0tzMFRHUUdiOW9ZbXdPMU14OTlGKzY0Mk1IWFpDdW9PTmpEcGp0YThPRThmWEJORlRYdjhQT1dGTWtYVXRuelBRR2lmbG9qVm5ZdmJMV21EblFxeEEwakZWUGF4OURjSXFTVUZTdlRaY0xqbE1meThueWdCVU5KNmdWZVFGL1pGY3FSS0YwUnBnVTJxMCtsZDdDd29nNEtIUU9OdEFjMGFNRGd4SmRNa09xbC80dXpBcFV5Qjdhb1daZHMvdG1HNzdZY1RnVHJ5RWFjVk41QWIrR1hCQktkL2QycmJKL0JMNStCODBjcXF4dnV0QjEvT0J6MFA3cFptNG01Tyt0bjk3eXB4WS8ySG1Ha2dzWFJuVWY2YVAxdHRlam45eDZxOXpwdG5wdjlXWSttbThYaTBsSHdvVi9scGgwSlBBZFZuTHBtSFJDMCs3Tk5tdjZaY09yTjJ1c29TL3E3NmRiby9IeDJ0MmFvU3BPVC9MN3VUbUpZMW9Vb3pIWUxtZjVpR1FaMjQ3K0dQNEkvb1NpNFB6MFozUmVQbzk4NGFlemFKVm1ncmxQczVSSHNNY3hTK2duWkFIMHhvcmxyS2dXT0VzUjZSMDNGTlBEdXFVNEYvTmM2M2ljYkIyTmJFM3pjMzNiY0kwb2tCRlIrN1poVFR6WGVBdkg3TE5Pd0pPUDJWNy83bnpmUGVCMjk4K1cxZlRkLzZ6YTAvOEImbHQ7L2RpYWdyYW0mZ3Q7Jmx0Oy9teGZpbGUmZ3Q7Ij48ZGVmcy8+PGc+PHJlY3QgeD0iMCIgeT0iMzAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTMwIiBmaWxsPSJyZ2IoMjU1LCAyNTUsIDI1NSkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMTYwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMzAiIGZpbGw9InJnYigyNTUsIDI1NSwgMjU1KSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSIyMCIgeT0iMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxNXB4OyBtYXJnaW4tbGVmdDogMjFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPua1j+iniOWZqDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI1MCIgeT0iMTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7mtY/op4jlmag8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjE3NSIgeT0iMCIgd2lkdGg9IjcwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxNXB4OyBtYXJnaW4tbGVmdDogMTc2cHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7mjqXlj6PmnI3liqHlmag8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjEwIiB5PSIxOSIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuaOpeWPo+acjeWKoeWZqDwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMCIgeT0iMTgwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMjU4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTk1cHg7IG1hcmdpbi1sZWZ0OiAxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7lk43lupTnmoTnu5PmnpzooqvmtY/op4jlmajmi6bmiKrvvIw8YnIgLz7nvZHpobXml6Dms5Xojrflj5bot6jln5/lk43lupTnmoTmlbDmja48L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTMwIiB5PSIxOTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lk43lupTnmoTnu5PmnpzooqvmtY/op4jlmajmi6bmiKrvvIwmI3hhO+e9kemhteaXoOazleiOt+WPlui3qOWfn+WTjeW6lOeahOaVsOaNrjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAxMDAgNjAgTCAxNTMuNjMgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDE1OC44OCA2MCBMIDE1MS44OCA2My41IEwgMTUzLjYzIDYwIEwgMTUxLjg4IDU2LjUgWiIgZmlsbD0icmdiKDAsIDAsIDApIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDFweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA1OXB4OyBtYXJnaW4tbGVmdDogMTI5cHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDExcHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPjxmb250IHN0eWxlPSJmb250LXNpemU6IDlweDsiPui3qOWfn+ivt+axgjwvZm9udD48L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTI5IiB5PSI2MiIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjExcHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPui3qOWfn+ivt+axgjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAxNjAgMTMwIEwgMTA2LjM3IDEzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMTAxLjEyIDEzMCBMIDEwOC4xMiAxMjYuNSBMIDEwNi4zNyAxMzAgTCAxMDguMTIgMTMzLjUgWiIgZmlsbD0icmdiKDAsIDAsIDApIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDFweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMzBweDsgbWFyZ2luLWxlZnQ6IDEzMHB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7IGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij48Zm9udCBzdHlsZT0iZm9udC1zaXplOiA5cHg7Ij7lk43lupQ8L2ZvbnQ+PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjEzMCIgeT0iMTMzIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTFweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5ZON5bqUPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDEwMCAxMzAgTCA4MCAxMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2E1MDA0MCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSA4NCAxMjYgTCA5MiAxMzQgTSA4NCAxMzQgTCA5MiAxMjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2E1MDA0MCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSAyMCA1MCBMIDYzIDUwIEwgODAgNjcgTCA4MCAxNDAgTCAyMCAxNDAgTCAyMCA1MCBaIiBmaWxsPSJyZ2IoMjU1LCAyNTUsIDI1NSkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDYzIDUwIEwgNjMgNjcgTCA4MCA2NyBaIiBmaWxsLW9wYWNpdHk9IjAuMDUiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxwYXRoIGQ9Ik0gNjMgNTAgTCA2MyA2NyBMIDgwIDY3IiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMjAiIHk9IjgwIiB3aWR0aD0iNjAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiA1OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDk1cHg7IG1hcmdpbi1sZWZ0OiAyMXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+572R6aG1PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjUwIiB5PSI5OSIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPue9kemhtTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMzEwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMzAiIGZpbGw9InJnYigyNTUsIDI1NSwgMjU1KSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSI0NzAiIHk9IjMwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEzMCIgZmlsbD0icmdiKDI1NSwgMjU1LCAyNTUpIiBzdHJva2U9InJnYigwLCAwLCAwKSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxyZWN0IHg9IjMzMCIgeT0iMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxNXB4OyBtYXJnaW4tbGVmdDogMzMxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7mtY/op4jlmag8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMzYwIiB5PSIxOSIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPua1j+iniOWZqDwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iNDg1IiB5PSIwIiB3aWR0aD0iNzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiA2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE1cHg7IG1hcmdpbi1sZWZ0OiA0ODZweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuaOpeWPo+acjeWKoeWZqDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI1MjAiIHk9IjE5IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5o6l5Y+j5pyN5Yqh5ZmoPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIzMTAiIHk9IjE4MCIgd2lkdGg9IjI2MCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDI1OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE5NXB4OyBtYXJnaW4tbGVmdDogMzExcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7lnKjmnI3liqHlmajnq6/vvIzphY3nva4gY29ycyDnm7jlhbPnmoTlk43lupTlpLTvvIw8YnIgLz7ku47ogIzop6PlhrPmtY/op4jlmajnq6/nmoTorr/pl67pmZDliLY8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNDQwIiB5PSIxOTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lnKjmnI3liqHlmajnq6/vvIzphY3nva4gY29ycyDnm7jlhbPnmoTlk43lupTlpLTvvIwuLi48L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gNDEwIDYwIEwgNDYzLjYzIDYwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSA0NjguODggNjAgTCA0NjEuODggNjMuNSBMIDQ2My42MyA2MCBMIDQ2MS44OCA1Ni41IFoiIGZpbGw9InJnYigwLCAwLCAwKSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogNTlweDsgbWFyZ2luLWxlZnQ6IDQzOXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7IGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij48Zm9udCBzdHlsZT0iZm9udC1zaXplOiA5cHg7Ij7ot6jln5/or7fmsYI8L2ZvbnQ+PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjQzOSIgeT0iNjIiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7ot6jln5/or7fmsYI8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gNDcwIDEzMCBMIDQxNi4zNyAxMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDQxMS4xMiAxMzAgTCA0MTguMTIgMTI2LjUgTCA0MTYuMzcgMTMwIEwgNDE4LjEyIDEzMy41IFoiIGZpbGw9InJnYigwLCAwLCAwKSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTMwcHg7IG1hcmdpbi1sZWZ0OiA0NDBweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTFweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+PGZvbnQgc3R5bGU9ImZvbnQtc2l6ZTogOXB4OyI+5ZON5bqUPC9mb250PjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI0NDAiIHk9IjEzMyIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjExcHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuWTjeW6lDwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAzMzAgNTAgTCAzNzMgNTAgTCAzOTAgNjcgTCAzOTAgMTQwIEwgMzMwIDE0MCBMIDMzMCA1MCBaIiBmaWxsPSJyZ2IoMjU1LCAyNTUsIDI1NSkiIHN0cm9rZT0icmdiKDAsIDAsIDApIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDM3MyA1MCBMIDM3MyA2NyBMIDM5MCA2NyBaIiBmaWxsLW9wYWNpdHk9IjAuMDUiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxwYXRoIGQ9Ik0gMzczIDUwIEwgMzczIDY3IEwgMzkwIDY3IiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMzMwIiB5PSI4MCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA5NXB4OyBtYXJnaW4tbGVmdDogMzMxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7nvZHpobU8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMzYwIiB5PSI5OSIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPue9kemhtTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iNDkwIiB5PSI4MCIgd2lkdGg9IjE3NSIgaGVpZ2h0PSI0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGZsZXgtc3RhcnQ7IHdpZHRoOiAxNzNweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMDBweDsgbWFyZ2luLWxlZnQ6IDQ5MnB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtGaXJhIENvZGUmcXVvdDssIG1vbm9zcGFjZTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+6YWN572uPGJyIC8+QWNjZXNzLUNvbnRyb24tQWxsb3ctKjxiciAvPuebuOWFs+eahOWTjeW6lOWktDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI0OTIiIHk9IjEwNCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iJ0ZpcmEgQ29kZScsIG1vbm9zcGFjZSIgZm9udC1zaXplPSIxMnB4Ij7phY3nva5BY2Nlc3MtQ29udHJvbi1BbGxvdy0qLi4uPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDQxMCAxMzAgTCAzNzIuMjQgMTMwIiBmaWxsPSJub25lIiBzdHJva2U9IiMyZDc2MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMzc4LjEyIDEyNi41IEwgMzcxLjEyIDEzMCBMIDM3OC4xMiAxMzMuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMmQ3NjAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48L2c+PHN3aXRjaD48ZyByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiLz48YSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC01KSIgeGxpbms6aHJlZj0iaHR0cHM6Ly93d3cuZGlhZ3JhbXMubmV0L2RvYy9mYXEvc3ZnLWV4cG9ydC10ZXh0LXByb2JsZW1zIiB0YXJnZXQ9Il9ibGFuayI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMHB4IiB4PSI1MCUiIHk9IjEwMCUiPlRleHQgaXMgbm90IFNWRyAtIGNhbm5vdCBkaXNwbGF5PC90ZXh0PjwvYT48L3N3aXRjaD48L3N2Zz4=' /></div>
<p>解决接口跨域问题的方案主要有两种：</p>
<ol>
<li><em>CORS</em><sup><em>Cross-Origin Resource Sharing，跨域资源共享</em></sup> - 主流解决方案</li>
<li>JSONP - 只支持 GET 请求</li>
</ol>
<h3 id="cors"><em>CORS</em></h3>
<h4 id="中间件-1">中间件</h4>
<p><strong>使用 <em>CORS</em> 中间件解决跨域问题</strong></p>
<p><code>cors</code> 是 Express 的一个第三方中间件，是对一系列 HTTP 响应头的封装。这些 HTTP 响应头决定浏览器是否阻止前端 JS 代码跨域获取资源，可以很方便地解决跨域问题。使用步骤分为如下 3 步：</p>
<ol>
<li>运行 <code>npm install cors</code> 安装中间件</li>
<li>使用 <code>const cors = require('cors')</code> 导入中间件</li>
<li>在 路由*^Router^* 之前调用 <code>app.use(cors())</code> 配置中间件</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 一定要在路由之前，配置 cors 这个中间件，从而解决接口跨域的问题
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">())</span></span></span></code></pre></div>
</div>
<p><kbd>📝 <em>Note</em></kbd></p>
<ol>
<li>CORS 在 <strong>服务器端</strong> 进行配置，客户端浏览器无须做任何额外的配置，即可请求开启了 CORS 的接口。</li>
<li>只有支持 XMLHttpRequest Level2 的浏览器，才能正常访问开启了 CORS 的服务端接口（如：IE10+、Chrome4+、FireFox3.5+）</li>
</ol>
<h4 id="服务端">服务端</h4>
<p>在服务器端通过 <code>res.setHeader</code> 的 <code>Access-Control-Allow-*</code> 系列参数来决定客户端可以发送的内容。</p>
<h5 id="origin"><code>Origin</code></h5>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">Access-Control-Allow-Origin: <span class="p">&lt;</span><span class="nt">origin</span><span class="p">&gt;</span> | *</span></span></code></pre></div></div>
</div>
<p>设置：</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&#34;Access-Control-Allow-Origin&#34;</span><span class="p">,</span> <span class="s2">&#34;&lt;origin&gt;&#34;</span><span class="p">)</span></span></span></code></pre></div></div>
</div>
<p>其中， <code>origin</code> 参数指定了允许访问该资源的外域 URL 。</p>
<h5 id="headers"><code>Headers</code></h5>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"> Access-Control-Allow-Headers</span></span></code></pre></div></div>
</div>
<p>默认情况下，CORS 仅支持客户端向服务器发送如下的 9 个请求头：</p>
<p><code>Accept</code>、<code>Accept-Language</code>、<code>Content-Language</code>、<code>DPR</code>、<code>Downlink</code>、<code>Save-Data</code>、<code>Viewport-Width</code>、<code>Width</code> 、<code>Content-Type</code> （值仅限于 <code>text/plain</code>、<code>multipart/form-data</code>、<code>application/x-www-form-urlencoded</code>）</p>
<p>如果客户端向服务器发送了额外的请求头信息，则需要在服务器端，通过 <code>Access-Control-Allow-Headers</code> 对额外的请求头进行声明，否则这次请求会失败。</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">res.setHeader<span class="o">(</span><span class="s1">&#39;Access-Control-Allow-Headers&#39;</span>, <span class="s1">&#39;Content-Type, X-custom-Header&#39;</span><span class="o">)</span></span></span></code></pre></div></div>
</div>
<h5 id="methods"><code> Methods</code></h5>
<p>默认情况下，CORS 仅支持客户端发起 GET、POST、HEAD 请求。</p>
<p>如果客户端希望通过 PUT、DELETE 等方式请求服务器的资源，则需要在服务器端，通过 <code>Access-Control-Alow-Methods</code> 来指明实际请求所允许使用的 HTTP 方法。</p>
<p><kbd>📝 <em>Note</em></kbd> <code>*</code> 代表通配符</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s1">&#39;Access-Control-Allow-Methods&#39;</span><span class="p">,</span> <span class="s1">&#39;POST, GET, PUT, DELETE&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s1">&#39;Access-Control-Allow-Methods&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span> <span class="c1">// 支持所有请求
</span></span></span></code></pre></div>
</div>
<h4 id="客户端">客户端</h4>
<p>客户端在请求接口时，根据 <strong>请求方式</strong> 和 <strong>请求头</strong> 的不同，可以将其分为两大类：</p>
<h5 id="简单请求">简单请求</h5>
<p>同时满足以下两大条件的请求，就属于简单请求：</p>
<ol>
<li>请求方式：GET、POST、HEAD 三者之一</li>
<li>HTTP 头部信息不超过以下几种字段：无自定义头部字段、<code>Accept</code>、<code>Accept-Language</code>、<code>Content-Language</code>、<code>DPR</code>、<code>Downlink</code>、<code>Save-Data</code>、<code>Viewport-Width</code>、<code>Width</code> 、<code>Content-Type</code>（包括 <code>application/x-www-form-urlencoded</code>、<code>multipart/form-data</code>、<code>text/plain</code>）</li>
</ol>
<p>此时客户端与服务器之间只会发生一次请求。</p>
<h5 id="预检请求">预检请求</h5>
<p>只要符合以下任何一个条件的请求，都需要进行预检请求：</p>
<ol>
<li>请求方式为 GET、POST、HEAD 之外的请求 Method 类型</li>
<li>请求头中包含 <strong>自定义头部字段</strong></li>
<li>向服务器发送了 <code>Content-Type</code> 为 <code>application/json</code> 格式的数据</li>
</ol>
<p>在浏览器与服务器正式通信之前，浏览器会先发送 <code>OPTION</code> 请求进行预检，以获知服务器是否允许该实际请求，这一次的 <code>OPTION</code> 请求称为预检请求。</p>
<p>服务器成功响应预检请求后，才会发送真正的请求，并且携带真实数据。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// apiRouter.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// GET 接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/get&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 通过 req.query 获取客户端发送到服务器的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>      <span class="c1">// 0 表示处理成功，1 表示处理失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;GET 请求成功！&#39;</span><span class="p">,</span> <span class="c1">// 状态的描述
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">data</span><span class="o">:</span> <span class="nx">query</span><span class="p">,</span>     <span class="c1">// 需要响应给客户端的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="c1">// POST 接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/post&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 通过 req.body 获取请求体中包含的 url-encoded 格式的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;POST 请求成功！&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">body</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="c1">// DELETE 接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;/delete&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;DELETE请求成功&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 配置解析表单数据的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span><span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span><span class="p">}));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 必须在配置 cors 中间件之前，配置 *JSONP* 的接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/jsonp&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 定义 *JSONP* 接口具体的实现过程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="cm">/* 1. 得到函数的名称 */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">funcName</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">callback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* 2. 定义要发送到客户端的数据对象 */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;zs&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">22</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* 3. 拼接出一个函数的调用 */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">scriptStr</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">funcName</span><span class="si">}</span><span class="sb">(</span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="si">}</span><span class="sb">)`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* 4. 把拼接的字符串，响应给客户端 */</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">scriptStr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 一定要在路由之前，配置 cors 这个中间件，从而解决接口跨域的问题
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 导入路由模块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;apiRouter&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 把路由模块，注册到 app 上
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;express server running at http://127.0.0.1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btnGET&#34;</span><span class="p">&gt;</span>GET<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btnPOST&#34;</span><span class="p">&gt;</span>POST<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btnDelete&#34;</span><span class="p">&gt;</span>DELETE<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;btnJSONP&#34;</span><span class="p">&gt;</span>JSONP<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 测试GET接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#btnGET&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1/api/get&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;cess&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 2. 测试POST接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#btnPOST&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1/api/post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="o">:</span> <span class="p">{</span><span class="nx">bookname</span><span class="o">:</span> <span class="s1">&#39;开端&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;祈祷君&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 3. 为删除按钮绑定点击事件处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#btnDelete&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1/api/delete&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 4. 为 *JSONP* 按钮绑定点击事件处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#btnJSONP&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1/api/jsonp&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;jsonp&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></span></span></code></pre></div>
</div>
<h3 id="jsonp"><em>JSONP</em></h3>
<p>概念：浏览器端通过 <code>&lt;script&gt;</code> 标签的 <code>src</code> 属性，请求服务器上的数据，同时，服务器返回一个 <strong>函数的调用</strong> 。这种请求数据的方式叫做 JSONP 。</p>
<p>特点</p>
<ol>
<li>JSONP 不属于真正的 Ajax 请求，因为它没有使用 XMLHttpRequest 这个对象</li>
<li>JSONP 仅支持 GET 请求，不支持 POST、PUT、DELETE 等请求</li>
</ol>
<p>如果项目中已经配置了 CORS 跨域资源共享，为了防止冲突，必须在配置 CORS 中间件 <strong>之前</strong> 声明 JSONP 的接口。否则 JSONP 接口会被处理成开启了 CORS 的接口</p>
<p>实现 JSONP 接口的步骤：</p>
<ol>
<li>获取客户端发送过来的回调函数的名字</li>
<li>得到要通过 JSONP 形式发送给客户端的数据</li>
<li>根据前两步得到的数据，拼接出一个函数调用的字符串</li>
<li>把上一步拼接得到的字符串，响应给客户端的 <code>&lt;script&gt;</code> 标签进行解析执行</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 服务端
</span></span></span><span class="line"><span class="cl"><span class="c1">// 必须在配置 cors 中间件之前，配置 JSONP 的接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/jsonp&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// TODO: 定义 JSONP 接口具体的实现过程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 1. 获取客户端发来的会掉函数名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">funcName</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">callback</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 2. 定义要发送到客户端的数据对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;zs&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">22</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 3. 拼接出一个函数的调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">scriptStr</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">funcName</span><span class="si">}</span><span class="sb">(</span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="si">}</span><span class="sb">)`</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 4. 把拼接的字符串，响应给客户端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">scriptStr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 客户端
</span></span></span><span class="line"><span class="cl"><span class="c1">// 4. 为 JSONP 按钮绑定点击事件处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#btnJSONP&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1/api/jsonp&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;jsonp&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="c1">// {name: &#39;zs&#39;, age: 22}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 客户端 - 使用原生JS实现
</span></span></span><span class="line"><span class="cl"><span class="c1">// 注意这里只能用function而不能用()=&gt;{}匿名函数不然获取不到函数名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">callFun</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">data</span><span class="p">)</span> <span class="c1">// callFun({&#34;name&#34;:&#34;zs&#34;,&#34;age&#34;:22})
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">callHandle</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">callHandle</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">callFun</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">callHandle</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1/api/jsonp&#39;</span><span class="p">,</span> <span class="c1">// 服务端jsonp接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">callback</span><span class="o">:</span> <span class="s1">&#39;callFun&#39;</span> <span class="c1">// 指定客户端上的回调处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">script</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="sb">`</span><span class="si">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb">?callback=</span><span class="si">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">callback</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">script</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 1. 在文档中创建 &lt;script src="&#34;${config.url}?callback=${config.callback}&#34;"
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 2. DOM加载并调用挂载的函数，即由服务器拼接的函数callFun({&#34;name&#34;:&#34;zs&#34;,&#34;age&#34;:22})
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 3. 调用客户端创建的&lt;script&gt;... fucntion callfn(data)&lt;/script&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">script</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<h2 id="认证">认证</h2>
<h3 id="开发模式">开发模式</h3>
<p>目前主流的 Web 开发模式有两种：</p>
<ol>
<li>
<p>基于 <strong>服务端渲染</strong> 的传统 Web 开发模式</p>
<p>传统 PHP ，服务器发送给客户端的 HTML 的页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要类似 AJAX 技术额外请求页面的数据。</p>
</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/index.html&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 1. 要渲染的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;zs&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">20</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 2. 服务通过字符串的拼接动态生成 HTML 内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">html</span> <span class="o">=</span> <span class="sb">`&lt;h1&gt;姓名：</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">，年龄：</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">age</span><span class="si">}</span><span class="sb">&lt;/h1&gt;`</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 3. 把预渲染页面内容响应给客户端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>

    <figure class="island text-base mb-4 not-prose">
        <blockquote class="island-body" >
            <p><kbd>☕️ <em><ruby style="color:rgb(1,125,47)">Pros</ruby> &amp; <ruby style="color:rgb(185,59,27)">Cons</ruby></em></kbd> 服务端渲染的优缺点</p>
<p>优点：</p>
<ol>
<li>前端耗时少</li>
<li>有利于 SEO</li>
</ol>
<p>缺点：</p>
<ol>
<li>占用服务器资源</li>
<li>不利于前后端分离 - 前后分离难以分工合作，尤其是前端复杂度高的时候</li>
</ol>
        </blockquote>
        
    </figure>

<ol start="2">
<li>
<p>基于 <strong>前后端分离</strong> 的新型 Web 开发模式</p>
<p>后端只负责提供 API 接口，前端使用 AJAX 调用</p>
</li>
</ol>

    <figure class="island text-base mb-4 not-prose">
        <blockquote class="island-body" >
            <p><kbd>☕️ <em><ruby style="color:rgb(1,125,47)">Pros</ruby> &amp; <ruby style="color:rgb(185,59,27)">Cons</ruby></em></kbd> 服务端渲染的优缺点</p>
<p>优点：</p>
<ol>
<li>开发体验好 - 前端专注于 UI 页面的开发，后端专注于  API 的开发</li>
<li>提高加载速度</li>
<li>减少服务端渲染压力</li>
</ol>
<p>缺点：</p>
<ol>
<li>
<p>占用服务器资源</p>
</li>
<li>
<p>不利于 SEO - 完整的 HTML 需要在客户端动态拼接完成，所以爬虫无法爬取页面的有效信息</p>
</li>
</ol>
<p><kbd>📝 <em>Note</em></kbd> <code>Nuxt.js</code> 可以实现 服务端渲染<sup><em>SSR, Server Side Render</em></sup> ，以解决 SEO 问题</p>
        </blockquote>
        
    </figure>

<p><kbd>📝 <em>Note</em></kbd> 选择 Web 开发模式</p>
<ol>
<li>企业级网站 - 主要是展示而没有复杂的交互，并且需要良好的 SEO - 服务端渲染</li>
<li>后台管理项目 - 交互性强，不需要考虑 SEO - 前后端分离</li>
</ol>
<p>另外，为了提高用户体验，一些网站采用了首屏服务器渲染+其他页面前后端分离的开发模式</p>
<h3 id="身份认证">身份认证</h3>
<p>对于服务端渲染和用户端渲染两种开发模式而言，分别有不同的认证方案：</p>
<ol>
<li>服务端渲染使用 Session 认证机制</li>
<li>前后端分离采用 JWT 认证机制</li>
</ol>
<h4 id="cookie"><em>Cookie</em></h4>
<p>存储在用户浏览器中的一段不超过 4KB 的字符串。它由一个 名称*^Name^* 、值*^Value^* 和其它几个用于控制 Cookie 有效期、安全性、使用范围的可选属性组成。</p>
<p>不同域名下的 Cookie 各自独立。当发起请求时，自动把当前域名下所有未过期的 Cookie 一同发送到服务器。</p>
<p><kbd>📝 <em>Note</em></kbd> Cookie 的几大特性</p>
<ol>
<li>自动发送</li>
<li>域名独立</li>
<li>过期时限</li>
<li>4KB 限制</li>
</ol>
<div class="ui-htmlblock-container"><img width="90%" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBEbyBub3QgZWRpdCB0aGlzIGZpbGUgd2l0aCBlZGl0b3JzIG90aGVyIHRoYW4gZGlhZ3JhbXMubmV0IC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjQ3MXB4IiBoZWlnaHQ9IjE2MXB4IiB2aWV3Qm94PSItMC41IC0wLjUgNDcxIDE2MSIgY29udGVudD0iJmx0O214ZmlsZSBob3N0PSZxdW90O0VsZWN0cm9uJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjItMTEtMTVUMTA6Mzc6NTEuNzQwWiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgZHJhdy5pby8yMC4zLjAgQ2hyb21lLzEwNC4wLjUxMTIuMTE0IEVsZWN0cm9uLzIwLjEuMyBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7U2d4Q3RQeHBwTEVKS1cwN2VjUDYmcXVvdDsgdmVyc2lvbj0mcXVvdDsyMC4zLjAmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7ZGt0MVlqTUhLMzNoS2MwaXlFazUmcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1pwYmIrTW9GTWMvRFk5ZDRWc01qeVp4cHRKb3RTUDFvZEsrckR3eFNhdzZKdVBRcHAxUHZ3ZUM0d3MwU2p0MXR0MU9IaW80WEl6UDcrOXpzQ2tLcHB2SEwzVzJYZjhwY2w0aUgrZVBLSmdoMzQvSkJQNHF3OVBCNFBsQmZMQ3M2aUkzdHRad1Uvemt4b2lOOWI3SSthN1hVUXBSeW1MYk55NUVWZkdGN05teXVoYjdmcmVsS1B0WDNXWXJiaGx1RmxscFcyK0xYSzRQVmhMaDFuN05pOVc2dWJLSFRjc21hem9idzI2ZDVXTGZNUVVwQ3FhMUVQSlEyanhPZWFtYzEvamxNRzcrVE90eFlUV3Y1RGtEYnYrWlg5M2w3SzhmZjgvQzY5dnlOdDl0djE2Rmgxa2VzdkxlM0xCWnJIeHFQTEJmRjVMZmJMT0ZxdStCTWdyWVdtNUtxSGxRWEJabE9SV2xxS0ZlaVFvNnNaMnN4UjF2ak1nUGFCRGpHWU1XZTgzbU5oNTRMZmxqeDJUdTRRc1hHeTdySitoaVduMWkvR2tVNVllbXZtL3hlQk5qVzNmUk5NYk1TR0oxbkx2MUdoU000MTdneEdnTUp5NUZKVHN1WE9yZjJNNk42THR6Ym1BN053MFJteU02UTJtRWtobWlSQlVJUVF5amRJSVlsT2NvSlNpSmxSR2FLRVVKMGFPSTZqOWtBNzZSZlJ4OUh6ZEFiRVpaV2F3cXFDN0E0eHpzVEhtNmdPQ1JtSVpOa2VmcU1zekZ2eGIzVmM3VnZXUEQyNFEvK2pZd2c2Z1BNL0J0bU1URmNpeVVFd2ZLNTNtOVQwd1hpbUF1THNGWVhHSW5GenBGUkQ5aUpFR0o5d200bkJQOExzckYrLzhrRmlzV25lbmJhRFRmT29MUkIvWHRCTDgzMzdvQ0NxUm5pQ05NcDJHRzJFeEgvQlFsb1M3TUVZRVFFeU9hSUFKNzBrbXBRc3IzR2tvclZab0tjVmZ3ZHhwNlJzamNrd0hSeUNicTJvV05GNG5JaTFJRU5DVVlNYW9LMEFFd0h4aXpXQ2Q4RHhIZlpxeDNjeUNPc04ycHRZTEFqUUxzVVhCRjZEUFY2eUdJcEhwVWFKYWhkb1Z4TzQrdHdzOGlLU3RJT0NSMTBlUjJ2SVd1cENpQ05RQXF4UWxDQXNRUjNDRGZiYlBxQ0wyUlFWYzdOREJpQk1MQS82Z20weGNXK1gwNEhtejlhZUVGQWxRNjFYTFMyMUxxbVVWQmVHcEZpSldpUUQrVWZyd043RUJhdW1yV2lOOUFaMkU0MkVSUlcyZGVkTW0zRHQrVmpVNElyU01xSzJpZEZ0V3IxUE94dHRsdkg1aUdnbkh0WGk0c0dGZXljOFVYU0I5Z1ZPaW9ickx6VHFRRlJEdWpqcGtJUmtHM1NQZEpWWjlQQzV6ODU4Q3BBM2lzbmtQR0dzNlJhd3Z6U1luNWpyM0RaWWw1RG1KREdyektFM1VBb054YVpydGRzZWl6T1owV080emdkUTNqQ0hQbmkxdzRveFNmL0FEQjg5NEpnKzNsamhkZFRteHNOUzh6V1R6MHp5VmNualZYK0NZS1dNbnpFT01CbkoyNHJ4ZmNqUEk3NXdpRGlhelBKTU9KWkZhdnVMUW0wcUNQdC8wTFR5dStMUHNsemdLY3VkaXpXWXcvQkhzTEdYa2xlMXRFOUEvYS9ZV1hsY0laSDhoK2g0R1RCSVBod2Mxcnc0QTEwZGpzei9pQTl6c01uRWIyMmhSZ2kyaWtNQURWOW9EODBMMzlONE1nL1JjPSZsdDsvZGlhZ3JhbSZndDsmbHQ7L214ZmlsZSZndDsiPjxkZWZzLz48Zz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMzEwIiB5PSIwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iNzAiIHk9IjgwIiB3aWR0aD0iODAiIGhlaWdodD0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiA3OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDg1cHg7IG1hcmdpbi1sZWZ0OiA3MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7kv53lrZjliLDmtY/op4jlmajkuK08L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTEwIiB5PSI4OCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5L+d5a2Y5Yiw5rWP6KeI5Zmo5LitPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iODAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiA3OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE1cHg7IG1hcmdpbi1sZWZ0OiAxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7mtY/op4jlmag8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNDAiIHk9IjE5IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5rWP6KeI5ZmoPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIzMTAiIHk9IjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDc4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTVweDsgbWFyZ2luLWxlZnQ6IDMxMXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5pyN5Yqh5ZmoPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjM1MCIgeT0iMTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7mnI3liqHlmag8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjcwIiB5PSIxMDAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMzIwIiB5PSIxMDAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iODAiIHk9IjExMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMjVweDsgbWFyZ2luLWxlZnQ6IDgxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPui6q+S7veiupOivgeeahDxiciAvPkNvb2tpZTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxMTAiIHk9IjEyOCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+6Lqr5Lu96K6k6K+B55qEJiN4YTtDb29raWU8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjMyMCIgeT0iMTEwIiB3aWR0aD0iODAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiA3OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDEyNXB4OyBtYXJnaW4tbGVmdDogMzIxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuacjeWKoeWZqOagueaNruivt+axgjxiciAvPuWktOS4reeahCBDb29raWU8YnIgLz7pqozmmI7nlKjmiLfnmoTouqvku708L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMzYwIiB5PSIxMjgiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuacjeWKoeWZqOagueaNruivt+axguWktOS4reeahCBDb29raWUuLi48L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjE2MCIgeT0iNTAiIHdpZHRoPSIxNTAiIGhlaWdodD0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxNDhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA1NXB4OyBtYXJnaW4tbGVmdDogMTYxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPumAmui/hyA8c3Bhbj48Yj7lk43lupTlpLQ8L2I+PC9zcGFuPiDvvIzlj5HpgIEgQ29va2llIOe7mea1j+iniOWZqDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyMzUiIHk9IjU4IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7pgJrov4cg5ZON5bqU5aS0IO+8jOWPkemAgSBDb29raWUg57uZ5rWP6KeI5ZmoPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNjAiIHk9IjEwMCIgd2lkdGg9IjE1MCIgaGVpZ2h0PSIxMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE0OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDEwNXB4OyBtYXJnaW4tbGVmdDogMTYxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPumAmui/hyA8Yj7or7fmsYLlpLQ8L2I+IO+8jOWPkemAgSBDb29raWUg57uZ5pyN5Yqh5ZmoPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjIzNSIgeT0iMTA4IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7pgJrov4cg6K+35rGC5aS0IO+8jOWPkemAgSBDb29raWUg57uZ5pyN5Yqh5ZmoPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNjAiIHk9IjE0MCIgd2lkdGg9IjE1MCIgaGVpZ2h0PSIxMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE0OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE0NXB4OyBtYXJnaW4tbGVmdDogMTYxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuWTjeW6lOW9k+WJjeeUqOaIt+WvueW6lOeahOWGheWuuTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyMzUiIHk9IjE0OCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5ZON5bqU5b2T5YmN55So5oi35a+55bqU55qE5YaF5a65PC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxNjAiIHk9IjEwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjEwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTQ4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTVweDsgbWFyZ2luLWxlZnQ6IDE2MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7nmbvlvZXor7fmsYI8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjM1IiB5PSIxOCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+55m75b2V6K+35rGCPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDE2MCAzMCBMIDMwMy42MyAzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNGQ5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDMwOC44OCAzMCBMIDMwMS44OCAzMy41IEwgMzAzLjYzIDMwIEwgMzAxLjg4IDI2LjUgWiIgZmlsbD0iIzRkOTkwMCIgc3Ryb2tlPSIjNGQ5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDMxMCA0MCBMIDE2Ni4zNyA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDE2MS4xMiA0MCBMIDE2OC4xMiAzNi41IEwgMTY2LjM3IDQwIEwgMTY4LjEyIDQzLjUgWiIgZmlsbD0iI2JkNzAwMCIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDE2MCAxMjAgTCAzMDMuNjMgMTIwIiBmaWxsPSJub25lIiBzdHJva2U9IiM0ZDk5MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMzA4Ljg4IDEyMCBMIDMwMS44OCAxMjMuNSBMIDMwMy42MyAxMjAgTCAzMDEuODggMTE2LjUgWiIgZmlsbD0iIzRkOTkwMCIgc3Ryb2tlPSIjNGQ5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDMxMCAxMzAgTCAxNjYuMzcgMTMwIiBmaWxsPSJub25lIiBzdHJva2U9IiNiZDcwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMTYxLjEyIDEzMCBMIDE2OC4xMiAxMjYuNSBMIDE2Ni4zNyAxMzAgTCAxNjguMTIgMTMzLjUgWiIgZmlsbD0iI2JkNzAwMCIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48L2c+PHN3aXRjaD48ZyByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiLz48YSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC01KSIgeGxpbms6aHJlZj0iaHR0cHM6Ly93d3cuZGlhZ3JhbXMubmV0L2RvYy9mYXEvc3ZnLWV4cG9ydC10ZXh0LXByb2JsZW1zIiB0YXJnZXQ9Il9ibGFuayI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMHB4IiB4PSI1MCUiIHk9IjEwMCUiPlRleHQgaXMgbm90IFNWRyAtIGNhbm5vdCBkaXNwbGF5PC90ZXh0PjwvYT48L3N3aXRjaD48L3N2Zz4=' /></div>
<p>由于 Cookie 是存储在浏览器中的，而且浏览器也提供了读写 Cookie 的 API ，因此 Cookie 很容易被伪造，不具有安全性。因此不建议服务器重要的隐私数据通过 Cookie 的形式发送给浏览器。</p>
<h4 id="session"><em>Session</em></h4>
<p>在计算机科学领域来说，尤其是在网络领域，会话是一种持久网络协议，在用户/用户代理端和服务器端之间建立关联，从而起到交换数据包的作用机制，session 在网络协议<sup><em>telnet, FTP, etc&hellip;</em></sup>中是非常重要的部分。</p>
<p>在不包含 会话层<sup><em>e.g, UDP</em></sup> 或者是无法长时间驻留会话层<sup><em>e.g, HTTP</em></sup> 的传输协议中，会话*^Session^* 的维持需要依靠在传输数据中的高级别程序。例如，在浏览器和远程主机之间的 HTTP 传输中，HTTP cookie 就会被用来包含一些相关的信息，例如 session ID，参数和权限信息等。</p>
<div class="ui-htmlblock-container"><img width="100%" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBEbyBub3QgZWRpdCB0aGlzIGZpbGUgd2l0aCBlZGl0b3JzIG90aGVyIHRoYW4gZGlhZ3JhbXMubmV0IC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjU3MXB4IiBoZWlnaHQ9IjMzMnB4IiB2aWV3Qm94PSItMC41IC0wLjUgNTcxIDMzMiIgY29udGVudD0iJmx0O214ZmlsZSBob3N0PSZxdW90O0VsZWN0cm9uJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjItMTEtMTVUMTE6MjQ6MTAuNjcxWiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgZHJhdy5pby8yMC4zLjAgQ2hyb21lLzEwNC4wLjUxMTIuMTE0IEVsZWN0cm9uLzIwLjEuMyBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7VnZIcnNuSWlEaFBFa1ExX3M1bDgmcXVvdDsgdmVyc2lvbj0mcXVvdDsyMC4zLjAmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7LUtrVUpNSnpteGR5ZURSZ192VE0mcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1Z0TGM2TTRFUDQxcWpsdGlqZmlpRENlT2V4V3pWWU9zek0zWWhTYkNqWXVqQ2ZPL1BwdENmR1dNZllZNGt5U1NxV0VhRDNvL3VqK3VsR1E3cTBQbjlOZ3Uvb25DV21NTkNVOElIMkdOTTFRZGZqTE9sNUVoMmJrSGNzMEN2TXV0ZXE0ajM1UjBhbUkzbjBVMGwxRE1FdVNPSXUyemM1RnN0blFSZGJvQzlJMGVXNktQU1p4YzlWdHNLU2RqdnRGRUhkN3YwVmh0c3A3c2FsVS9WOW90RndWSzZ1S3VMTU9DbUhSc1ZzRllmSmM2OUo5cEh0cGttUjVhMzN3YU14MFYrZ2xIemMvY3JmY1dFbzMyWkFCNU52OS9vZHQ3YjZHUDdUVi9zdS8zLy8rL3Vzdk1jdlBJTjZMQnhhYnpWNEtEYVRKZmhOU05vbUNkUEs4aWpKNnZ3MFc3TzR6bUJ6NlZ0azZoaXNWbW85UkhIdEpuS1J3dlVrMklFUjJXWm84MGFJVGFicWoyOHFNd0IyeE5rMHplamo2VUdxcEtvQVlUZFkwUzE5QVJBd29jU0xncFJmWHo1V3hTcE9zYW9ZcURCZ0lmQ3pMcVNzVlFrTm84UXlOYXFjMVNqZWh5NkFKVjRzNDJPMmlSVk9KVFkzWFZRcmFlMVFDWFFsa2VpVXpXMUdVVXE4MDdDRDdwRlpyV2pON2xKYlNPTWlpbjgzcFpab1VLM3hOSWxpNE5KcGhOSTFtdEkyeFMvYnBnb3BSZFVpM0p0S3NFeE5sUWJxa1dXY2lidGp5c1MrM3RYNXRXM2RzYXN3YzUwM1l0RzBLM2JuUXBtMXdkQ1lhMmFaRzE2YStoWWlKOEJ6NUdMazJ3aGo1Sm5JYzVHS2tXVEhva1R5azBGcXlsaGRIVkd5c0RnUHdjRm5UOEUxVEMxOHBjWjlCSEMwM0REMHdMWVYrd3Z4bEJBSEtGVGZXVVJpeVphU3V1ZVZLa2swMkQ5WlJ6SFQ3YVI2bEFlelNnNUQ5Q1drZWkxbkpKdG5sRTF6Rk9lc3RVMnBkNTJ4SklLbVA1WnROaVcxTjVQckk1VVlHd3hJYitUWnlDWExuckFGR0pvVEprQmx5VE9UUEVmR1E0M0xoT1FKaytnWWlMbklOQmcxaUlOZGl3bkNMeldPeVNiREZKMVFRVm04WUZJSjNPVmV5ZThjWGFOMmdiRXNNcjQ1bGVPY3NSeTJVSEFhN0ZkZVMydWV5NCtDQnhpUllQQzE1LzJEeWM4NjcyRElSdSt5c0U2UlpOOUR3N25rVUYxdC9hMUhFMHZVN3ZmWmpYTWdUVE9jT1hzUUdKcTFwdzBvQjdROEkzamdFZ1gvY3FjWVlLT3d3bTZraE9DRFpZd2phSGcwQklza09IZ3B4WmJEeERpMDJkelA1bW5WYUthK2NBZmNZcy9jbG1WYVB0b1JiV2NqeEVKNXhUZ1FzU2UzaHpmYzBCVFhjTUVXNkttOCt5NlJGRUd1K09aSVhaMUl1clVvS0hUMEdadzFkM0FMRzdCZ1ZtZTVnZ2Nzb2dqcURwRE1YN0p3UmJwc053UVkzUVBJVVVXaklKcmNaY1llbGUvajk3V0p0WERwdWFManJjMlYwWEJzTk81TENTVjhpWmpJc01QTmF5UFVFckZqK3BmSzB5K1RDbUVteUJpVHJLc0phTDc0Y2hCV2V4OEZ3eU5Ha3cwMlcxaEdlMllHQTZ4YWd4bnlITHZzVmlhSE9iemtDZ0FCUzFvQ3hNSkJ3WWI2Y2VEa2NzWG1SWUJwOHdpT2dGcy9JaDBQK1dJRzZ4N0crVjFCakNaR1FnZG9ZRGRTUzZzSkhOVkJNMjNZbGwzTG16a1JqYytZQjlQQ2puTit5RWRZdU0zWUhOZTJKeGpZMlBtM3N4UjU0YXBHUm4yZjUyMGpUM3hxYXJ2WWh3UmpvT3NDaXdVdE5iTXNFZGowYmJrY2lSZW5mVjF0ZWJjaERJOS9CZGFFOW9BTDZBZTJKb2QxQjVNWFFIdmpkODdlaHJaOEpiV01DYUd1U3NoWlFaaURzMkJPOEhxdXY5SDBtcG8vWnJURm53Mjc3SytFS2FpOEJscndFK0RqY2YrL0FoRHdackFvQXJXOXdaU1dBNXo3T3ZNaTUvQ3FOcWhLck1wYzBXS0xIRWlXTFdUcFBLbDJZa0ZjbWdHZUlFb1VuUmgwdFk1Ukw1RG1wV1p1SFozelF6aE5QQnI1OFl4NmZFSEkzYVQyRG81QTRqZEtGTkJsa3ErUkpzY2R4ekpjalhUZitUbEFyK1pZc3pmZEdLNEFWQjluKzZKQUsxa2xmL2hOYjRoZmZ5NmVCaTltaGZtdjJJcTZHQm1KTnlRTlZIM0hSWHpOaW56eGdkUEZKSlR4T3hOYmF6TURxajlodGVYTUtNcXBKa3VxZU16WTlCVGlKaTVRNmRHbWRibDRMSHJXQzNmWDlhWnJqOHJZY2F0dWZEcTJmalhaR1E1TmszMWY3b05CVHNlMXloYkppZXp3Mk00S3BNc1JDdzVueHNuV2RFUGhpMU5HdkVqMG55dDVwQWRlMEpBQ1U4ZERSdmtvVVRPR1BEdWhEUS9PdDVNalhxeHhQbENPYlorYkk1aFE1c2o3ZzZNY0h0S2VHOXFWa3NsdHdud2phSjhoa1I5NmVBdHJhZWJUQllzVWV3a013Q0VDazd2djBXNmIwRm1PSkpPY1BtS2ZmMGl5OXlQd2xETVJnb1o4VktYb0tCeFpqcEs0cEdBanhleG5JZ0JySCt5d05tSzllR3RCbEphMnV2VXBUWW42SXZBQUpFRlNHU1Y4Y0t4ZjF5NTZ5VncvcWVsNEVJSzZhWUo0VnhrNXlZOW1CSEliVjRxUU5PMVJScTVHMUNYQ0hKTDlUaUpyalFSUXVxMzhxekwxczlaK1p1djgvJmx0Oy9kaWFncmFtJmd0OyZsdDsvbXhmaWxlJmd0OyI+PGRlZnMvPjxnPjxyZWN0IHg9IjE0MCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSAzNzAgMTQwIEwgMTk2LjM3IDE0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDE5MS4xMiAxNDAgTCAxOTguMTIgMTM2LjUgTCAxOTYuMzcgMTQwIEwgMTk4LjEyIDE0My41IFoiIGZpbGw9IiNiZDcwMDAiIHN0cm9rZT0iI2JkNzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSAxOTAgODAgTCAzNjMuNjMgODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzRkOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSAzNjguODggODAgTCAzNjEuODggODMuNSBMIDM2My42MyA4MCBMIDM2MS44OCA3Ni41IFoiIGZpbGw9IiM0ZDk5MDAiIHN0cm9rZT0iIzRkOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMTYwIiB5PSIxMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNXB4OyBtYXJnaW4tbGVmdDogMTYxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7RmlyYSBDb2RlJnF1b3Q7LCBtb25vc3BhY2U7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPua1j+iniOWZqDxiciAvPkNsaWVudDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxOTAiIHk9IjI5IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSInRmlyYSBDb2RlJywgbW9ub3NwYWNlIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPua1j+iniOWZqCYjeGE7Q2xpZW50PC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxOTAiIHk9IjgyIiB3aWR0aD0iMTcwIiBoZWlnaHQ9IjEwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTY4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogODdweDsgbWFyZ2luLWxlZnQ6IDE5MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7lrqLmiLfnq6/nmbvlvZXvvJrmj5DkuqTotKblj7flr4bnoIE8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjc1IiB5PSI5MCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5a6i5oi356uv55m75b2V77ya5o+Q5Lqk6LSm5Y+35a+G56CBPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDE5MCAzMTYuOTcgTCAxODkuODYgNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIzIDMiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDE5MCAzMjIuMjIgTCAxODYuNSAzMTUuMjIgTCAxOTAgMzE2Ljk3IEwgMTkzLjUgMzE1LjIxIFoiIGZpbGw9IiM5MzcwZGIiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSAzNzAuMTQgMzE2Ljk3IEwgMzcwIDUwIiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iMyAzIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSAzNzAuMTQgMzIyLjIyIEwgMzY2LjY0IDMxNS4yMiBMIDM3MC4xNCAzMTYuOTcgTCAzNzMuNjQgMzE1LjIxIFoiIGZpbGw9IiM5MzcwZGIiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMzIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDU4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMjVweDsgbWFyZ2luLWxlZnQ6IDM0MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0ZpcmEgQ29kZSZxdW90OywgbW9ub3NwYWNlOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5pyN5Yqh5ZmoPGJyIC8+U2VydmVyPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjM3MCIgeT0iMjkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IidGaXJhIENvZGUnLCBtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5pyN5Yqh5ZmoJiN4YTtTZXJ2ZXI8L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMjhweDsgbWFyZ2luLWxlZnQ6IDE5MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5pyN5Yqh5Zmo5ZON5bqU77yaPGJyIC8+5bCG55Sf5oiQ55qEIENvb2tpZSDlk43lupTnu5nlrqLmiLfnq688L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjc1IiB5PSIxMzEiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuacjeWKoeWZqOWTjeW6lO+8miYjeGE75bCG55Sf5oiQ55qEIENvb2tpZSDlk43lupTnu5nlrqLmiLfnq688L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxOTBweDsgbWFyZ2luLWxlZnQ6IDE5MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5a6i5oi356uv5YaN5qyh5Y+R6LW36K+35rGC77yaPGJyIC8+6YCa6L+H6K+35rGC5aS06Ieq5Yqo5oqK5b2T5YmN5ZCN5LiL5omA5pyJ5Y+v55So55qEIENvb2tpZSDlj5HpgIHnu5nmnI3liqHlmag8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjc1IiB5PSIxOTMiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuWuouaIt+err+WGjeasoeWPkei1t+ivt+axgu+8miYjeGE76YCa6L+H6K+35rGC5aS06Ieq5Yqo5oqK5b2T5YmN5ZCN5LiL5omA5pyJ5Y+v55So55qEIENvb2tpZSDlj5HpgIHnu5nmnI3liqHlmag8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMTkwIDIxMCBMIDM2My42MyAyMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzRkOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzY4Ljg4IDIxMCBMIDM2MS44OCAyMTMuNSBMIDM2My42MyAyMTAgTCAzNjEuODggMjA2LjUgWiIgZmlsbD0iIzRkOTkwMCIgc3Ryb2tlPSIjNGQ5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzNzAgMjcyIEwgMTk2LjM3IDI3MiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAxOTEuMTIgMjcyIEwgMTk4LjEyIDI2OC41IEwgMTk2LjM3IDI3MiBMIDE5OC4xMiAyNzUuNSBaIiBmaWxsPSIjYmQ3MDAwIiBzdHJva2U9IiNiZDcwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM3MCA4MCBRIDM5MCA5MCAzOTAgOTUgUSAzOTAgMTAwIDM3NS43IDEwNy4xNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzNzEgMTA5LjUgTCAzNzUuNyAxMDMuMjQgTCAzNzUuNyAxMDcuMTUgTCAzNzguODMgMTA5LjUgWiIgZmlsbD0iIzkzNzBkYiIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzNzAgMTEwIFEgMzkwIDEyMCAzOTAgMTI1IFEgMzkwIDEzMCAzNzUuNyAxMzcuMTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcxIDEzOS41IEwgMzc1LjcgMTMzLjI0IEwgMzc1LjcgMTM3LjE1IEwgMzc4LjgzIDEzOS41IFoiIGZpbGw9IiM5MzcwZGIiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBmbGV4LXN0YXJ0OyB3aWR0aDogNzhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA5NnB4OyBtYXJnaW4tbGVmdDogNDAycHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+6aqM6K+B6LSm5Y+35a+G56CBPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjQwMiIgeT0iOTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiPumqjOivgei0puWPt+WvhueggTwvdGV4dD48L3N3aXRjaD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGZsZXgtc3RhcnQ7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMjVweDsgbWFyZ2luLWxlZnQ6IDQwMnB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDlweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuWwhueZu+W9leaIkOWKn+WQjueahOeUqOaIt+S/oeaBr+WtmOWCqOWcqOacjeWKoeWZqOeahOWGheWtmOS4re+8jOWQjOaXtueUn+aIkOWvueW6lOeahCBDb29raWUg5a2X56ym5LiyPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjQwMiIgeT0iMTI4IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4Ij7lsIbnmbvlvZXmiJDlip/lkI7nmoTnlKjmiLfkv6Hmga/lrZjlgqjlnKjmnI3liqHlmajnmoTlhoXlrZjkuK3vvIzlkIzml7bnlJ/miJDlr7nlupTnmoQgQ29va2llIOWtl+espuS4sjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAxOTAgMTQwIFEgMTcwIDE1MCAxNzAgMTc1IFEgMTcwIDIwMCAxODQuMyAyMDcuMTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMTg5IDIwOS41IEwgMTgxLjE3IDIwOS41IEwgMTg0LjMgMjA3LjE1IEwgMTg0LjMgMjAzLjI0IFoiIGZpbGw9IiM5MzcwZGIiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBmbGV4LWVuZDsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE3NXB4OyBtYXJnaW4tbGVmdDogMHB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiByaWdodDsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7mtY/op4jlmajoh6rliqjmioogQ29va2llIOWtmOWCqOWcqOW9k+WJjeWfn+WQjeS4izwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIxNjgiIHk9IjE3OCIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9ImVuZCI+5rWP6KeI5Zmo6Ieq5Yqo5oqKIENvb2tpZSDlrZjlgqjlnKjlvZPliY3ln5/lkI3kuIs8L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxNzhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNjBweDsgbWFyZ2luLWxlZnQ6IDE5MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5pyN5Yqh5Zmo5ZON5bqU77yaPGJyIC8+5oqK5b2T5YmN55So5oi35omA5a+55bqU55qE6aG16Z2i5YaF5a655ZON5bqU57uZ5rWP6KeI5ZmoPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjI4MCIgeT0iMjYzIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7mnI3liqHlmajlk43lupTvvJomI3hhO+aKiuW9k+WJjeeUqOaIt+aJgOWvueW6lOeahOmhtemdouWGheWuueWTjeW6lOe7mea1j+iniOWZqDwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAzNzAgMjEwIFEgMzkwIDIyMCAzOTAgMjI1IFEgMzkwIDIzMCAzNzUuNyAyMzcuMTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcxIDIzOS41IEwgMzc1LjcgMjMzLjI0IEwgMzc1LjcgMjM3LjE1IEwgMzc4LjgzIDIzOS41IFoiIGZpbGw9IiM5MzcwZGIiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcwIDI0MCBRIDM5MCAyNTAgMzkwIDI1NSBRIDM5MCAyNjAgMzc1LjcgMjY3LjE1IiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM3MSAyNjkuNSBMIDM3NS43IDI2My4yNCBMIDM3NS43IDI2Ny4xNSBMIDM3OC44MyAyNjkuNSBaIiBmaWxsPSIjOTM3MGRiIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgZmxleC1zdGFydDsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDIyNXB4OyBtYXJnaW4tbGVmdDogNDAycHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5pyN5Yqh5Zmo5qC55o2u6K+35rGC5aS05Lit5pC65bim55qEIENvb2tpZSDvvIw8YnIgLz7ku47lhoXlrZjkuK3mn6Xmib7lr7nlupTnmoTnlKjmiLfkv6Hmga88L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNDAyIiB5PSIyMjgiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiPuacjeWKoeWZqOagueaNruivt+axguWktOS4reaQuuW4pueahCBDb29raWUg77yMLi4uPC90ZXh0Pjwvc3dpdGNoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgZmxleC1zdGFydDsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDI1NXB4OyBtYXJnaW4tbGVmdDogNDAycHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+55So5oi355qE6Lqr5Lu96K6k6K+B5oiQ5Yqf5ZCO77yMPGJyIC8+5pyN5Yqh5Zmo6ZKI5a+55b2T5YmN55So5oi355Sf5oiQ54m55a6a55qE5ZON5bqU5YaF5a65PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjQwMiIgeT0iMjU4IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4Ij7nlKjmiLfnmoTouqvku73orqTor4HmiJDlip/lkI7vvIwmI3hhO+acjeWKoeWZqOmSiOWvueW9k+WJjeeUqOaIt+eUn+aIkOeJueWumueahOWTjeW6lOWGheWuuTwvdGV4dD48L3N3aXRjaD48L2c+PC9nPjxzd2l0Y2g+PGcgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ii8+PGEgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNSkiIHhsaW5rOmhyZWY9Imh0dHBzOi8vd3d3LmRpYWdyYW1zLm5ldC9kb2MvZmFxL3N2Zy1leHBvcnQtdGV4dC1wcm9ibGVtcyIgdGFyZ2V0PSJfYmxhbmsiPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTBweCIgeD0iNTAlIiB5PSIxMDAlIj5UZXh0IGlzIG5vdCBTVkcgLSBjYW5ub3QgZGlzcGxheTwvdGV4dD48L2E+PC9zd2l0Y2g+PC9zdmc+' /></div>
<h5 id="express-session"><code>express-session</code></h5>
<p>在 Express 项目中，只需安装 <code>express-session</code> 中间件，即可在项目中使用 Session 认证。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 1. 导入 Session 中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">session</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express-session&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 2. 配置 Session 中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">session</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">secret</span><span class="o">:</span> <span class="s1">&#39;keyboard cat&#39;</span><span class="p">,</span> <span class="c1">// secret 属性可以为任意字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">reSave</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>          <span class="c1">// 固定写法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">saveUninitialized</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// 固定写法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
</div>
<p>当 <code>express-session</code> 中间件配置成功后，即可通过 <code>req.session</code> 来访问和使用 session 对象，从而存储用户的相关信息。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/api/login&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 判断用户提交的登录信息是否正确
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span> <span class="o">!==</span> <span class="s1">&#39;admin&#39;</span> <span class="o">||</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span> <span class="o">!==</span> <span class="s1">&#39;000000&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">status</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;登录失败&#39;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// NOTE: 将登录成功后的用户信息，保存到 Session 中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 注意：只有成功配置了 express-session 这个中间件之后，才能够通过 req 点出来 session 这个属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="c1">// 用户的信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">isLogin</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">// 用户的登录状态
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;登录成功&#39;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p>这样，用户下次访问的时候，就可以从 <code>req.session</code> 挂载的对象上获取之前存储的数据：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 获取用户姓名的接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/username&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// NOTE: 从 Session 中获取用户的名称，响应给客户端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">isLogin</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">status</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;fail&#39;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">username</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p>处理用户登出时，调用 <code>req.session.destory()</code> 函数，即可清空服务器保存的 <code>session</code> 信息。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 退出登录的接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/api/logout&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// NOTE: 清空 Session 信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;退出登录成功&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h5 id="局限性">局限性</h5>
<p>Session 机制需要配合 Cookie 才能实现。由于 Cookie 默认不支持跨域访问，所以，当涉及前端跨域请求后端接口时，需要很多额外的设置，才能实现跨域 Session 认证。</p>
<p><kbd>📝 <em>Note</em></kbd></p>
<ol>
<li>当前端请求后端接口不存在跨域问题时，推荐使用 Session 身份认证机制</li>
<li>当前端需要跨域请求时，推荐使用 JWT 认证机制</li>
</ol>
<h4 id="jwt"><em>JWT</em></h4>
<p>JWT<sup><em>JSON Web Token</em></sup> 是目前最流行的跨域认证解决方案。</p>
<div class="ui-htmlblock-container"><img width="100%" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBEbyBub3QgZWRpdCB0aGlzIGZpbGUgd2l0aCBlZGl0b3JzIG90aGVyIHRoYW4gZGlhZ3JhbXMubmV0IC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjU3MXB4IiBoZWlnaHQ9IjMzMnB4IiB2aWV3Qm94PSItMC41IC0wLjUgNTcxIDMzMiIgY29udGVudD0iJmx0O214ZmlsZSBob3N0PSZxdW90O0VsZWN0cm9uJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjItMTEtMTZUMDI6NDk6NDUuMzc3WiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgZHJhdy5pby8yMC4zLjAgQ2hyb21lLzEwNC4wLjUxMTIuMTE0IEVsZWN0cm9uLzIwLjEuMyBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7a0ZaQnc0VUJwTVFnS0s1Smh2SlcmcXVvdDsgdmVyc2lvbj0mcXVvdDsyMC4zLjAmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7LUtrVUpNSnpteGR5ZURSZ192VE0mcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1Z0ZGM1czRGUDAxbWo1dGh1K1BSN0J4KzlDZDZZNTNwdHUrRWFQWVRESHlZTnc0K2ZWN0pRUUdKR1BzR09JMHlYUlNFSklROXh6dVBmZWlJSDJ5M24vT3dzM3FieExoQkdsS3RFZjZGR21hb2Vyd216WTg4UWJOS0JxV1dSd1ZUZXFoWVI0L1k5Nm84TlpkSE9GdG8yTk9TSkxIbTJiamdxUXBYdVNOdGpETHlHT3oyd05KbW5mZGhFc3NOTXdYWVNLMmZvK2pmRlcwT3FaeWFQK0M0K1dxdkxPcThDdnJzT3pNRzdhck1DS1B0U1k5UVBva0l5UXZqdGI3Q1U2bzdVcTdGT05tUjY1V0M4dHdtdmNaNEgrZjczN2ExdlpiOUZOYjdiNzg4K1ByaitlLytDeS93MlRISDVndk5uOHFMWkNSWFJwaE9vbUNkUDl4RmVkNHZna1g5T29qUUE1dHEzeWR3SmtLaHc5eGtreElRakk0VDBrS25meHRucEZmdUd4RW11N3F0akwxNFFxL044NXl2RC82VUdwbEtxQVlKbXVjWjAvUWhRK29lTUxwcFpmbmp3ZXdLa2hXTmFCS0FFUE9qMlUxOWNHRWNNQ3RlSVpGdGRNV3hXbmtVV3JDMlNJSnQ5dDQwVFJpMCtKMWs0TDFIcFJRVjBLWlhmMnByU2hLWlZjY0NjdythZFdhMWN3T28yVTRDZlA0ZDNONm1TWDVIYjZSR0c1Y2dXWVlUZENNTmhoYnNzc1dtSStxVTdvMWtXYWRtQ2dQc3lYT2hZa1lzTlZqWDQ2MWZtMnNCVXlOcWV1K0NVemJVT2p1aFppMnlTRk1ORENtaG9ocFlDSGZSTTRNQlE3eWJPUTRLRENSNnlMUFFacVZnQjM5K3d5T2x2Um9rc1NZTDZ4T0EvQndlUlA0SnRUY1YwcmNaNWpFeTVTeUI2YkYwTzVUZnhsRGdQTDRoWFVjUmZRMlV0ZmNjaVVreldmaE9rNm9iVC9ONGl5RVZVNGdaSDlDMm9UR0xKS1NiVEhCVlp5ejNvSlNFNTJ6SmFHa1BwUnZOaVhZbXNnTGtNZEFCbUI5R3dVMjhuemt6ZWdCZ096N3RJOC9SYTZKZ2hueUo4ajFXT2NaQW1ZR0J2STk1Qm1VR3I2QlBJdDJoa3QwSHBOTzRsaHNRZ1U1NmcyVGd1c3U5MHE0Qzc1QUU0T3lMUUZlSFFwNDl5eEh6WTBjaGRzVnM1TGE1YktUOEI0bmZyajR0V1R0dmNYUE9lOWlDeUo2S3R3bnpISXgwTERtV1p5VVMzOXJVY1RTOVR1OTltTmNxQk5NOXc1ZXhBWW5yWEhEU2tudER3cmVPQVZCZjl5cHhoQXNGSlROMkJUc2tleFJCbTJPaGdDZVpJZjNaWGVsTjNqN2xwcTdtWHpOT20yVVY4NkFPOERzZkVuR3RhTXQwVllXY2lmSW1USk5CQ3BKN2RETmM1eUJHVzVZSWwxVk41OEZhUm5FbW0rTzVNVVpWVXVya2tKSEIrRDBRT2VYUURHN3hrRk1DMXhnZlJRdW5hR25PK1BxbkFwdW13NXh3QVVyL3dJUFV2aGZOcmROZFR2Y3VVUGUzeTdWaGxYamh1YUlMbGVteHJYQnFDT3BtM1RsWVNhbEFvWFhRdDZFczRxbVh5ckx1a3pXMmFFOTZRSGs2aXB5dEU1NnVjaFJXQm9Id3lGRmt3NDNhVmJuRzNYQ2VidDhSYkw0R2VRRktZbm5RV0xJaHNIcS9USkRkQ1pkcEc0eWx6OElXeExraUFmbWRqalA5OHBjUnlJV1pNdzFCbU91cElMd1VmSGowN2I5eGFXNldKaG9hRjNjUXdKK2xPeGJHRG5hWldBTHJHbFBORFRZem1td0Z6dlFvbVhXZlI3eXQ1R0t2elUyWGUxamdkSFRkUUNpNFZPdDI0WjIySFlzdUIySkZLVjdYZTMrYXFNL0hCUXJ1QzYxZTFRNVA2ZzlNclVGUmw1TTdaN2ZObDlNYmYxTWFoc2pVRnVUbEs1QU1uc2VsZHFGZUhmVVYvb0drK0NIL05hVXMyRzMvUlYzQmJXWHdKRzhCTTV4dXI5c1U0UXM0eFB4RS9NeWsrYjhUbkRJcTFxbEFWcFpxQ1dNUmFaR1A4ck5XTVprMFdtTEZKTG1keTZiV1dXWE9oSTFsb0lWbjN1clpkQVVUS254cVZxWVVLRm9wbmM4UDdSWjVtcXhwY0dzb21OK0p6eVVmQUdXWm5DRGxhM0s3V2QvZEpBRWRMS24vL2lTMk1tUDZtbmdaTHF2WDVvKzhiTytvVlZUaXREVEpVWDAxNHpCSjdjRlhieS95QmttQm12dFdHOTF4K0IyZjNNTWVhbEowdVFqTlMzcTlGakpGNUs3b3ZaTFBUUjFqVjhKdUtaNVRqSzY3VkxpZWdzbmFySHFGd3NMbWpMSDhOS1J0QnAwZGNlWkZRUzhMYy9aZHB6MnF6dE9TZUo4dFhxL1JZZkRQNzdUUm1jVHVteTRHT1l0ZGttcEJmVmEyWjhyQUpjdWh0WmpYZVJPV1ZtNUtDS2J2TkJjakRyNjFhQmp3OWM3cmIyYWxvU0FNZ2s1MkZlRGt0bC9kT1R1RzROdkpiMjlYdEYzcFBUV1BETzlOY2RJYi9VZU96TStxRDAydFM5VmpXS3RmQ1JxbjFDTlFuOTdER3ByNThtR1VnbjB5NktMREoxcnpVRFlLUENDK3NEN3pNL05WOC9QZFZtbHFBTktoKzIvOWhtbVBoV1BWTElGZkVjMkx5dFZsR0IwYzJlU3NwSlVreDRsS1loS2phdkNnd0k5cVZ0bGUxbWdzMS91VXFHRnIrcTVSSEVxQ05oM1NsRnpPSXJDNmVIdjhRb1BlUGlqUmozNEh3PT0mbHQ7L2RpYWdyYW0mZ3Q7Jmx0Oy9teGZpbGUmZ3Q7Ij48ZGVmcy8+PGc+PHJlY3QgeD0iMTQwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDM3MCAxNDAgTCAxOTYuMzcgMTQwIiBmaWxsPSJub25lIiBzdHJva2U9IiNiZDcwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMTkxLjEyIDE0MCBMIDE5OC4xMiAxMzYuNSBMIDE5Ni4zNyAxNDAgTCAxOTguMTIgMTQzLjUgWiIgZmlsbD0iI2JkNzAwMCIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDE5MCA4MCBMIDM2My42MyA4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNGQ5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDM2OC44OCA4MCBMIDM2MS44OCA4My41IEwgMzYzLjYzIDgwIEwgMzYxLjg4IDc2LjUgWiIgZmlsbD0iIzRkOTkwMCIgc3Ryb2tlPSIjNGQ5OTAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSIxNjAiIHk9IjEwIiB3aWR0aD0iNjAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiA1OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDI1cHg7IG1hcmdpbi1sZWZ0OiAxNjFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtGaXJhIENvZGUmcXVvdDssIG1vbm9zcGFjZTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5rWP6KeI5ZmoPGJyIC8+Q2xpZW50PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjE5MCIgeT0iMjkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IidGaXJhIENvZGUnLCBtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5rWP6KeI5ZmoJiN4YTtDbGllbnQ8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjE5MCIgeT0iODIiIHdpZHRoPSIxNzAiIGhlaWdodD0iMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA4N3B4OyBtYXJnaW4tbGVmdDogMTkxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuWuouaIt+err+eZu+W9le+8muaPkOS6pOi0puWPt+WvhueggTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9IjkwIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lrqLmiLfnq6/nmbvlvZXvvJrmj5DkuqTotKblj7flr4bnoIE8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMTkwIDMxNi45NyBMIDE4OS44NiA1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IjMgMyIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMTkwIDMyMi4yMiBMIDE4Ni41IDMxNS4yMiBMIDE5MCAzMTYuOTcgTCAxOTMuNSAzMTUuMjEgWiIgZmlsbD0iIzkzNzBkYiIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDM3MC4xNCAzMTYuOTcgTCAzNzAgNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIzIDMiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDM3MC4xNCAzMjIuMjIgTCAzNjYuNjQgMzE1LjIyIEwgMzcwLjE0IDMxNi45NyBMIDM3My42NCAzMTUuMjEgWiIgZmlsbD0iIzkzNzBkYiIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSIzMjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogNThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNXB4OyBtYXJnaW4tbGVmdDogMzQxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogJnF1b3Q7RmlyYSBDb2RlJnF1b3Q7LCBtb25vc3BhY2U7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7mnI3liqHlmag8YnIgLz5TZXJ2ZXI8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMzcwIiB5PSIyOSIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iJ0ZpcmEgQ29kZScsIG1vbm9zcGFjZSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7mnI3liqHlmagmI3hhO1NlcnZlcjwvdGV4dD48L3N3aXRjaD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDEyOHB4OyBtYXJnaW4tbGVmdDogMTkxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7mnI3liqHlmajlk43lupTvvJo8YnIgLz7lsIbnlJ/miJDnmoQgVG9rZW4g5ZON5bqU57uZ5a6i5oi356uvPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjI3NSIgeT0iMTMxIiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7mnI3liqHlmajlk43lupTvvJomI3hhO+WwhueUn+aIkOeahCBUb2tlbiDlk43lupTnu5nlrqLmiLfnq688L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxOTBweDsgbWFyZ2luLWxlZnQ6IDE5MXB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5a6i5oi356uv5YaN5qyh5Y+R6LW36K+35rGC77yaPGJyIC8+6YCa6L+H6K+35rGC5aS055qEIEF1dGhvcml6YXRpb24g5a2X5q6177yMPGJyIC8+5bCGIFRva2VuIOWPkemAgee7meacjeWKoeWZqDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9IjE5MyIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5a6i5oi356uv5YaN5qyh5Y+R6LW36K+35rGC77ya6YCa6L+H6K+35rGC5aS055qEIEF1dGhvcml6YXRpb24g5a2X5q6177yMLi4uPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDE5MCAyMTAgTCAzNjMuNjMgMjEwIiBmaWxsPSJub25lIiBzdHJva2U9IiM0ZDk5MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM2OC44OCAyMTAgTCAzNjEuODggMjEzLjUgTCAzNjMuNjMgMjEwIEwgMzYxLjg4IDIwNi41IFoiIGZpbGw9IiM0ZDk5MDAiIHN0cm9rZT0iIzRkOTkwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcwIDI3MiBMIDE5Ni4zNyAyNzIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2JkNzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMTkxLjEyIDI3MiBMIDE5OC4xMiAyNjguNSBMIDE5Ni4zNyAyNzIgTCAxOTguMTIgMjc1LjUgWiIgZmlsbD0iI2JkNzAwMCIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzNzAgODAgUSAzOTAgOTAgMzkwIDk1IFEgMzkwIDEwMCAzNzUuNyAxMDcuMTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcxIDEwOS41IEwgMzc1LjcgMTAzLjI0IEwgMzc1LjcgMTA3LjE1IEwgMzc4LjgzIDEwOS41IFoiIGZpbGw9IiM5MzcwZGIiIHN0cm9rZT0iIzkzNzBkYiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ibm9uZSIvPjxwYXRoIGQ9Ik0gMzcwIDExMCBRIDM5MCAxMjAgMzkwIDEyNSBRIDM5MCAxMzAgMzc1LjcgMTM3LjE1IiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM3MSAxMzkuNSBMIDM3NS43IDEzMy4yNCBMIDM3NS43IDEzNy4xNSBMIDM3OC44MyAxMzkuNSBaIiBmaWxsPSIjOTM3MGRiIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgZmxleC1zdGFydDsgd2lkdGg6IDc4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogOTZweDsgbWFyZ2luLWxlZnQ6IDQwMnB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDlweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPumqjOivgei0puWPt+WvhueggTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI0MDIiIHk9Ijk5IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4Ij7pqozor4HotKblj7flr4bnoIE8L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBmbGV4LXN0YXJ0OyB3aWR0aDogMTY4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTI1cHg7IG1hcmdpbi1sZWZ0OiA0MDJweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7pqozor4HpgJrov4flkI7vvIzlsIbnlKjmiLfnmoTkv6Hmga/lr7nosaHvvIw8YnIgLz7nu4/ov4fliqDlr4blkI7nlJ/miJAgVG9rZW4g5a2X56ym5LiyPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjQwMiIgeT0iMTI4IiBmaWxsPSJyZ2IoMCwgMCwgMCkiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iOXB4Ij7pqozor4HpgJrov4flkI7vvIzlsIbnlKjmiLfnmoTkv6Hmga/lr7nosaHvvIwmI3hhO+e7j+i/h+WKoOWvhuWQjueUn+aIkCBUb2tlbiDlrZfnrKbkuLI8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMTkwIDE0MCBRIDE3MCAxNTAgMTcwIDE3NSBRIDE3MCAyMDAgMTg0LjMgMjA3LjE1IiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDE4OSAyMDkuNSBMIDE4MS4xNyAyMDkuNSBMIDE4NC4zIDIwNy4xNSBMIDE4NC4zIDIwMy4yNCBaIiBmaWxsPSIjOTM3MGRiIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgZmxleC1lbmQ7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxNzVweDsgbWFyZ2luLWxlZnQ6IDBweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogcmlnaHQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogOXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogbm9uZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+5bCGIFRva2VuIOWtmOWCqOWIsCBMb2NhbFN0b3JhZ2U8YnIgLz7miJbmmK8gU2Vzc2lvblN0b3JhZ2U8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTY4IiB5PSIxNzgiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiIHRleHQtYW5jaG9yPSJlbmQiPuWwhiBUb2tlbiDlrZjlgqjliLAgTG9jYWxTdG9yYWdlLi4uPC90ZXh0Pjwvc3dpdGNoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTc4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMjYwcHg7IG1hcmdpbi1sZWZ0OiAxOTFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDlweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuacjeWKoeWZqOWTjeW6lO+8mjxiciAvPuaKiuW9k+WJjeeUqOaIt+aJgOWvueW6lOeahOmhtemdouWGheWuueWTjeW6lOe7mea1j+iniOWZqDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyODAiIHk9IjI2MyIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjlweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5pyN5Yqh5Zmo5ZON5bqU77yaJiN4YTvmiorlvZPliY3nlKjmiLfmiYDlr7nlupTnmoTpobXpnaLlhoXlrrnlk43lupTnu5nmtY/op4jlmag8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMzcwIDIxMCBRIDM5MCAyMjAgMzkwIDIyNSBRIDM5MCAyMzAgMzc1LjcgMjM3LjE1IiBmaWxsPSJub25lIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM3MSAyMzkuNSBMIDM3NS43IDIzMy4yNCBMIDM3NS43IDIzNy4xNSBMIDM3OC44MyAyMzkuNSBaIiBmaWxsPSIjOTM3MGRiIiBzdHJva2U9IiM5MzcwZGIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9Im5vbmUiLz48cGF0aCBkPSJNIDM3MCAyNDAgUSAzOTAgMjUwIDM5MCAyNTUgUSAzOTAgMjYwIDM3NS43IDI2Ny4xNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PHBhdGggZD0iTSAzNzEgMjY5LjUgTCAzNzUuNyAyNjMuMjQgTCAzNzUuNyAyNjcuMTUgTCAzNzguODMgMjY5LjUgWiIgZmlsbD0iIzkzNzBkYiIgc3Ryb2tlPSIjOTM3MGRiIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGZsZXgtc3RhcnQ7IHdpZHRoOiAxNjhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyMjVweDsgbWFyZ2luLWxlZnQ6IDQwMnB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDlweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHdoaXRlLXNwYWNlOiBub3JtYWw7IG92ZXJmbG93LXdyYXA6IG5vcm1hbDsiPuacjeWKoeWZqOaKiiBUb2tlbiDlrZfnrKbkuLLov5jljp/miJDnlKjmiLfnmoTkv6Hmga/lr7nosaE8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNDAyIiB5PSIyMjgiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiPuacjeWKoeWZqOaKiiBUb2tlbiDlrZfnrKbkuLLov5jljp/miJDnlKjmiLfnmoTkv6Hmga/lr7nosaE8L3RleHQ+PC9zd2l0Y2g+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBmbGV4LXN0YXJ0OyB3aWR0aDogMTY4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMjU1cHg7IG1hcmdpbi1sZWZ0OiA0MDJweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogcmdiKDAsIDAsIDApOyAiIHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDBweDsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiA5cHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiByZ2IoMCwgMCwgMCk7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7nlKjmiLfnmoTouqvku73orqTor4HmiJDlip/lkI7vvIw8YnIgLz7mnI3liqHlmajpkojlr7nlvZPliY3nlKjmiLfnlJ/miJDnibnlrprnmoTlk43lupTlhoXlrrk8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNDAyIiB5PSIyNTgiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSI5cHgiPueUqOaIt+eahOi6q+S7veiupOivgeaIkOWKn+WQju+8jCYjeGE75pyN5Yqh5Zmo6ZKI5a+55b2T5YmN55So5oi355Sf5oiQ54m55a6a55qE5ZON5bqU5YaF5a65PC90ZXh0Pjwvc3dpdGNoPjwvZz48L2c+PHN3aXRjaD48ZyByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiLz48YSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC01KSIgeGxpbms6aHJlZj0iaHR0cHM6Ly93d3cuZGlhZ3JhbXMubmV0L2RvYy9mYXEvc3ZnLWV4cG9ydC10ZXh0LXByb2JsZW1zIiB0YXJnZXQ9Il9ibGFuayI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMHB4IiB4PSI1MCUiIHk9IjEwMCUiPlRleHQgaXMgbm90IFNWRyAtIGNhbm5vdCBkaXNwbGF5PC90ZXh0PjwvYT48L3N3aXRjaD48L3N2Zz4=' /></div>
<p><em>JWT</em> 通常由三部分组成，分别是 <em>Header</em>^头部^ 、<em>Payload</em>^有效荷载^ 、<em>Signature</em>^签名^ 。三者之间使用 <code>.</code> 分隔，格式如下：</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Header.Payload.Signature</span></span></code></pre></div></div>
</div>
<ol>
<li><em>Payload</em> - 真正的用户信息，经过加密后生成的字符串</li>
<li><em>Header</em>, <em>Signature</em> - 安全性相关的部分，只是为了保障 Token 的安全性</li>
</ol>
<div class="ui-htmlblock-container"><img width="50%" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBEbyBub3QgZWRpdCB0aGlzIGZpbGUgd2l0aCBlZGl0b3JzIG90aGVyIHRoYW4gZGlhZ3JhbXMubmV0IC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjMzNnB4IiBoZWlnaHQ9IjE3MXB4IiB2aWV3Qm94PSItMC41IC0wLjUgMzM2IDE3MSIgY29udGVudD0iJmx0O214ZmlsZSBob3N0PSZxdW90O0VsZWN0cm9uJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjItMTEtMTZUMDU6MDc6MDEuMjg0WiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgZHJhdy5pby8yMC4zLjAgQ2hyb21lLzEwNC4wLjUxMTIuMTE0IEVsZWN0cm9uLzIwLjEuMyBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7cEpGMFJ2d3laWERmMi1XNHJOVkUmcXVvdDsgdmVyc2lvbj0mcXVvdDsyMC4zLjAmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7LUtrVUpNSnpteGR5ZURSZ192VE0mcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1ZoTmI5czRFUDAxUkU4SnFHL3BLUHFqT1hTQkxMeEFONzB4RW0wSmtVUXZSZFYyZi8wT0tjcVNMTWR1V2djRmRwdURRdzdKMFhEbThmRkp5Sm1WKzQrQ2JyTS9lTW9LWk9OMGo1dzVzbTB2d3ZDckRJZlc0R092Tld4RW5yWW1xemVzOG0vTUdNMjZUWk9uckI1TmxKd1hNdCtPalFtdktwYklrWTBLd1hmamFXdGVqSis2cFJzMk1hd1NXa3l0bi9OVVpxMDE5SEJ2ZjJENUp1dWViR0V6VXRKdXNqSFVHVTM1Ym1CeUZzaVpDYzVsMnlyM00xYW8zSFY1YWRjdFh4azlCaVpZSmI5bkFmbThhcjRFZnYyWWZyR3o1dUhQcDA5UDMrNk1sNiswYU15R1RiRHkwR1ZBOEtaS21YSmlJWWZzc2x5eTFaWW1hblFISlFkYkpzdkNESy96b3BqeGdndm9WN3lDU2FTV2dyK3d6b2hzSjNJQ1BDY3dRa1ZpQ2c3SklKdUMxcXBZR05vbUtpWWsyNys2WGV1WVJBQWY0eVdUNGdCVHpBSTdOSGszd0hNN0pPNzZNbmFtYkZEQmJoazF3TmtjUGZlNWhZWko3eHRTN1Z4UE5hdlNXR0VXZW9uS1JwNk1zenRKcFR1UElxd1NWcjh3bVdRbWV5d0ZDQnV2ckhqbXUwVnZJTm9BQXlxNU9lQmNtZmE1L0Z1dHZmZE03Nm56Qk8zNWZ0ZzVkSjBLY2pKWXBMcFB3N0YrbWU0ZFJwVlZFVjZ1SytTRk55SmhseExxR2o2Z1lzUGtwWW5lZWFRTWtPQ2RRVUpuRTZ5Z012ODZEdmdjUE13VEhua09XemtDMGJIR1FIVDhFNFMxR3pXcmhnZjR4SkY3Z21qbkZLcHRJaWFPQUZMME1KaTJWUlBxMXdQMjdKT1Q0NCtJQlJxdHgvNG9ISFA2NDZmRG01Nk9SWUFpRjhVaFd2Z29EQkVKME1KRlpJbGlTMXNzRkMvVkhFSlFDSTFRRFlVd3gwTmhqR0tzR2pBaDlGVUREbnE0UUlzbElqTVVRb0IrQVRVbXoySjAvUHgvR3NYRlpNMHJlVmRyWW9waGdtVnY5eHE0M1RpME52by9PQ1lZRVIxT0ZLcW4yZmlSSGdwT1UyaWhSWVJDUjhmdnFmamJTR0FTaWZUS1dPMU83VEZHb2F1SDVpZ0tsQ1dlb2RqWG00Vk5UVmtDT0ZGZTRnWER1MmVvbUJiNXBsTGtBbWVOZ1oxMEpCQ2JnVEpQVTgwUzUyaSt2d2l3eVpKaGI4dStEV1U3emdudzdDbGxXK2M0MjNrM3puYW5zQXpJcmZCais3UlVpYTJlNjYzdTYyRFVHcmdyYm9iUzZWT2Ftb21LbG1abHY0U21aVjZOUE53a2dHRCtEaEF1MkZyZUZzQ3F2NlJsWGlqMGZWam1na0xNTTlDekgzUXhjTWtyWHJjTy81djZaRXJCRDR5bVROd2JUcnRmUVk2cGJBVDdYYzlwUFYzYkc5WFQ2MTUwcnBHWC9WNEZkZkdiRktjcHlLQ0c0L3hPeENlWkIxaUx6MkZad2I3RzFNRlVLNzkwbWF1WTM2VDhmcFZPYzA5dUg2OHI2TS9xdEltalYzVGFyYVNVK3gwdmRiL3Izc3ZkTGw4L1czZmZ1dUxvdmVzK2ZjTnNDVnlMVVJEQnR0YStlRURqL1FYZlMxb1EwM0hjUzFvalEyUGRpTFdLMVNvOG1pdUJDK0kxVWo3L0FvaFUramxEUWJ0QW9kYTZvZGZKZUl6aTRQOGphQ2QzZ3YrckJhM3JYK2VHT3FOYjFVd2FVUnlJb01tTGVydSs5dVZuL0pub0FtbTg0Vm8rZDZVUGZHTDlkNEdJQkpmQURGd0I0UzY2MFhlbDQ3M2U2YlpnZXMvYlowcHEvVUJOb2R0L0gyeHBvdi9JNml6K0JRPT0mbHQ7L2RpYWdyYW0mZ3Q7Jmx0Oy9teGZpbGUmZ3Q7Ij48ZGVmcy8+PGc+PHJlY3QgeD0iMCIgeT0iNzAiIHdpZHRoPSI5MCIgaGVpZ2h0PSI4MCIgcng9IjEuNiIgcnk9IjEuNiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTM3MGRiIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSA0NSA3MCBMIDQ1IDUwIFEgNDUgNDAgNTUgNDAgTCAyMzAgNDAgUSAyNDAgNDAgMjQwIDUwIEwgMjQwIDc4LjYzIiBmaWxsPSJub25lIiBzdHJva2U9IiM0ZDk5MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMjQwIDgzLjg4IEwgMjM2LjUgNzYuODggTCAyNDAgNzguNjMgTCAyNDMuNSA3Ni44OCBaIiBmaWxsPSIjNGQ5OTAwIiBzdHJva2U9IiM0ZDk5MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxyZWN0IHg9IjUwIiB5PSIwIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiIHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTg4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTVweDsgbWFyZ2luLWxlZnQ6IDUxcHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij7nlKjmiLfkv6Hmga/nu4/ov4fliqDlr4blkI7vvIw8YnIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsiIC8+5bCx5pivIFBheWxvYWQg6YOo5YiG5a+55bqU55qE5a2X56ym5LiyPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjE0NSIgeT0iMTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7nlKjmiLfkv6Hmga/nu4/ov4fliqDlr4blkI7vvIwmI3hhO+WwseaYryBQYXlsb2FkIOmDqOWIhuWvueW6lOeahOWtl+espuS4sjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMCIgeT0iNzAiIHdpZHRoPSI5MCIgaGVpZ2h0PSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGZsZXgtc3RhcnQ7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDExMHB4OyBtYXJnaW4tbGVmdDogMnB4OyI+PGRpdiBkYXRhLWRyYXdpby1jb2xvcnM9ImNvbG9yOiByZ2IoMCwgMCwgMCk7ICIgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMHB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiAmcXVvdDtGaXJhIENvZGUmcXVvdDssIG1vbm9zcGFjZTsgY29sb3I6IHJnYigwLCAwLCAwKTsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgb3ZlcmZsb3ctd3JhcDogbm9ybWFsOyI+ezxiciBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyIgLz7CoCBpZDogMyw8YnIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsiIC8+wqAgdXNlcm5hbWU6ICJhZG1pbiI8YnIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsiIC8+fTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyIiB5PSIxMTQiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IidGaXJhIENvZGUnLCBtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTJweCI+ey4uLjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTQ1IiB5PSI4NSIgd2lkdGg9IjE5MCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGZsZXgtc3RhcnQ7IHdpZHRoOiAxODhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA5NXB4OyBtYXJnaW4tbGVmdDogMTQ3cHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6ICZxdW90O0ZpcmEgQ29kZSZxdW90OywgbW9ub3NwYWNlOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij5IZWFkZXIuUGF5bG9hZC5TaWduYXR1cmU8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTQ3IiB5PSI5OSIgZmlsbD0icmdiKDAsIDAsIDApIiBmb250LWZhbWlseT0iJ0ZpcmEgQ29kZScsIG1vbm9zcGFjZSIgZm9udC1zaXplPSIxMnB4Ij5IZWFkZXIuUGF5bG9hZC5TaWduYXR1cmU8L3RleHQ+PC9zd2l0Y2g+PC9nPjxwYXRoIGQ9Ik0gMTUwIDEwNSBMIDIwMCAxMDUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2JkNzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSAyNjEgMTA1IEwgMzMxIDEwNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmQ3MDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cmVjdCB4PSIxNDUiIHk9IjE0MCIgd2lkdGg9IjE5MCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5IiBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE4OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE1NXB4OyBtYXJnaW4tbGVmdDogMTQ2cHg7Ij48ZGl2IGRhdGEtZHJhd2lvLWNvbG9ycz0iY29sb3I6IHJnYigwLCAwLCAwKTsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDAsIDAsIDApOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij5IZWFkZXIg5ZKMIFNpZ25hdHVyZTxiciAvPuWPquaYr+S4uuS6huS/nemanCBUb2tlbiDnmoTlronlhajmgKc8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMjQwIiB5PSIxNTkiIGZpbGw9InJnYigwLCAwLCAwKSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5IZWFkZXIg5ZKMIFNpZ25hdHVyZS4uLjwvdGV4dD48L3N3aXRjaD48L2c+PHBhdGggZD0iTSAyNDUgNTUgTCAyNDAgNTUgUSAyMzUgNTUgMjM1IDY1IEwgMjM1IDExMCBRIDIzNSAxMjAgMjMwIDEyMCBMIDIyNy41IDEyMCBRIDIyNSAxMjAgMjMwIDEyMCBMIDIzMi41IDEyMCBRIDIzNSAxMjAgMjM1IDEzMCBMIDIzNSAxNzUgUSAyMzUgMTg1IDI0MCAxODUgTCAyNDUgMTg1IiBmaWxsPSJub25lIiBzdHJva2U9IiNiZDcwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwLDIzNSwxMjApIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxzd2l0Y2g+PGcgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ii8+PGEgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNSkiIHhsaW5rOmhyZWY9Imh0dHBzOi8vd3d3LmRpYWdyYW1zLm5ldC9kb2MvZmFxL3N2Zy1leHBvcnQtdGV4dC1wcm9ibGVtcyIgdGFyZ2V0PSJfYmxhbmsiPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTBweCIgeD0iNTAlIiB5PSIxMDAlIj5UZXh0IGlzIG5vdCBTVkcgLSBjYW5ub3QgZGlzcGxheTwvdGV4dD48L2E+PC9zd2l0Y2g+PC9zdmc+' /></div>
<p>客户端收到服务器返回的 JWT 后，通常会将它储存在 <code>localStorage</code> 或 <code>sessionStorage</code> 中。</p>
<p>此后，客户端每次于服务器通信，都要带上这个 JWT 字段，从而进行身份认证。推荐的做法是把 JWT 放在 HTTP 请求头的 <code>Authorization</code> 字段中，格式如下：</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Authorization: Bearer &lt;token&gt;</span></span></code></pre></div></div>
</div>
<h5 id="使用-2">使用</h5>
<p>运行如下命令，安装两个 JWT 相关的包：</p>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm i jsonwebtoken express-jwt</span></span></code></pre></div></div>
</div>
<ol>
<li><em>jsonwebtoken</em> - 生成 JWT 字符串</li>
<li><em>express-jwt</em> - 将 JWT 解析还原成 JSON 对象</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 安装并导入 JWT 相关的两个包，分别是 jsonwebtoken 和 express-jwt
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">jwt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jsonwebtoken&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">expressJWT</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express-jwt&#39;</span><span class="p">)</span></span></span></code></pre></div>
</div>
<p>为了保障 JWT 字符串的安全性，防止字符串在传输过程中被别人破解，需要专门定义一个用于 <strong>加密</strong> 和 <strong>解密</strong> 的 <code>secret</code> 密钥：</p>
<ol>
<li>当生成 JWT 字符串的时候，需要使用 <code>secret</code> 密钥对用户的信息进行加密，最终得到加密好的 JWT 字符串</li>
<li>还原 JWT 字符串为 JSON 对象时，需要使用 <code>secret</code> 密钥进行解密</li>
</ol>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">secretKey</span> <span class="o">=</span> <span class="s1">&#39;random key&#39;</span></span></span></code></pre></div></div>
</div>
<h5 id="jsonwebtoken"><code>jsonwebtoken</code></h5>
<p>该 npm 包用于 <strong>加密</strong> JWT 字符串，以在客户端进行保存。（登录后减少数据库的调用？）</p>
<p>调用 <code>jsonwebtoken</code> 包提供的  <code>sign()</code> 方法，将用户的信息加密成 JWT 字符串，响应给客户端：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 登录接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/api/login&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 将 req.body 请求体中的数据，转存为 userinfo 常量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">userinfo</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 登录失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">userinfo</span><span class="p">.</span><span class="nx">username</span> <span class="o">!==</span> <span class="s1">&#39;admin&#39;</span> <span class="o">||</span> <span class="nx">userinfo</span><span class="p">.</span><span class="nx">password</span> <span class="o">!==</span> <span class="s1">&#39;000000&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">status</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;登录失败！&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 登录成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// NOTE: 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 在登录成功之后，调用 jwt.sign() 方法生成 JWT 字符串。并通过 token 属性发送给客户端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   参数1：用户的信息对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   参数2：加密的秘钥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   参数3：配置对象，可以配置当前 token 的有效期
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 记住：千万不要把密码加密到 token 字符中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">tokenStr</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">username</span><span class="o">:</span> <span class="nx">userinfo</span><span class="p">.</span><span class="nx">username</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="nx">secretKey</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">expiresIn</span><span class="o">:</span> <span class="s1">&#39;30s&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;登录成功！&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">token</span><span class="o">:</span> <span class="nx">tokenStr</span> <span class="c1">// 要发送给客户端的 token 字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p><strong>生成 <em>JWT</em></strong></p>
<p><kbd>⚠️ <em>Caution</em></kbd> 生成 JWT 的 Token 字符串时候，一定要剔除 <strong>密码</strong> 和 <strong>头像</strong> 的值</p>
<ol>
<li>通过 ES6 的对象字面量，快速剔除密码和头像的值：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 剔除完毕之后，user 中只保留了用户的 id, username, nickname, email 这四个属性的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">user_pic</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 后面覆盖前面的值
</span></span></span></code></pre></div>
</div>
<ol start="2">
<li>运行如下的命令，安装生成 Token 字符串的包：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i jsonwebtoken</span></span></code></pre></div></div>
</div>
<ol start="3">
<li>在 <code>/router_handler/user.js</code> 模块的头部区域，导入 <code>jsonwebtoken</code> 包：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 用这个包来生成 Token 字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">jwt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jsonwebtoken&#39;</span><span class="p">)</span></span></span></code></pre></div>
</div>
<ol start="4">
<li>创建 <code>config.js</code> 文件，并向外共享 <strong>加密</strong> 和 <strong>还原</strong> Token 的 <code>jwtSecretKey</code> 字符串：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">jwtSecretKey</span><span class="o">:</span> <span class="s1">&#39;randon key string&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<ol start="5">
<li>将用户信息对象加密成 Token 字符串：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 导入配置文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../config&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 生成 Token 字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">tokenStr</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">config</span><span class="p">.</span><span class="nx">jwtSecretKey</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">expiresIn</span><span class="o">:</span> <span class="s1">&#39;10h&#39;</span> <span class="c1">// token 有效期为 10 个小时
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span></span></span></code></pre></div>
</div>
<ol start="6">
<li>将生成的 Token 字符串响应给客户端：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;登录成功！&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 为了方便客户端使用 Token，在服务器端直接拼接上 Bearer 的前缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">token</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">tokenStr</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<h5 id="express-jwt"><code>express-jwt</code></h5>
<p>该 npm 包用于 <strong>解析</strong> JWT 字符串，以在服务端进行分析。</p>
<p><kbd>⭐️ <em>Important</em></kbd> 被解析的字符串挂载在 <code>req.user</code> 字段上</p>
<p>客户端每次在访问那些有权限接口的时候，都需要主动通过请求头中的 <code>Authorization</code> 字段，将 Token 字符串发送到服务器进行身份认证。此时，服务器可以通过 <code>express-jwt</code> 这个中间件，自动将客户端发送过来的 Token 解析还原成 JSON 对象：</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// NOTE 注册将 JWT 字符串解析还原成 JSON 对象的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1">// 注意：只要配置成功了 express-jwt 这个中间件，就可以把解析出来的用户信息，挂载到 req.user 属性上
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">expressJWT</span><span class="p">({</span> <span class="c1">// 解析 JWT 的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">secret</span><span class="o">:</span> <span class="nx">secretKey</span>
</span></span><span class="line"><span class="cl">  <span class="p">}).</span><span class="nx">unless</span><span class="p">({</span> <span class="c1">// 用来标注哪些接口不需要访问权限
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">path</span><span class="o">:</span> <span class="p">[</span><span class="sr">/^\/api\//</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span></span></span></code></pre></div>
</div>
<p><kbd>⚠️ <em>Caution</em></kbd> 调试接口模拟发送 JWT 的 token 时，需要在原始字符串前加 <code>Bearer</code> 并换行/添加控股，否则无法被正确解析</p>
<p><kbd>📝 <em>Note</em></kbd> 捕获解析失败后产生的错误</p>
<p>当使用 <code>express-jwt</code> 解析 Token 字符串时，如果客户端发送过来的 Token 字符串 <strong>过期</strong> 或 <strong>不合法</strong> ，会产生一个 <strong>解析失败</strong> 的错误，影响项目的正常运行。我们可以通过 Express 的错误处理中间件，捕获错误并进行相关的处理。</p>

    <figure class="island text-base mb-4 not-prose">
        <blockquote class="island-body" >
            <p>可以阻止未登录用户访问部分画面？</p>
        </blockquote>
        
    </figure>

<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// NOTE: 使用全局错误处理中间件，捕获解析 JWT 失败后产生的错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 这次错误是由 token 解析失败导致的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;UnauthorizedError&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">status</span><span class="o">:</span> <span class="mi">401</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;无效的token&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;未知的错误&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 调用 app.listen 方法，指定端口号并启动web服务器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8888</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Express server running at http://127.0.0.1:8888&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p><strong>解析 <em>Token</em></strong></p>
<ol>
<li>运行如下的命令，安装解析 Token 的中间件：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">npm</span> <span class="nx">i</span> <span class="nx">express</span><span class="o">-</span><span class="nx">jwt</span></span></span></code></pre></div></div>
</div>
<ol start="2">
<li>在 <code>app.js</code> 中注册路由之前，配置解析 Token 的中间件：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 导入配置文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./config&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 解析 token 的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">expressJWT</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express-jwt&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 使用 .unless({ path: [/^\/api\//] }) 指定哪些接口不需要进行 Token 的身份认证
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">expressJWT</span><span class="p">({</span> <span class="nx">secret</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">jwtSecretKey</span> <span class="p">}).</span><span class="nx">unless</span><span class="p">({</span> <span class="nx">path</span><span class="o">:</span> <span class="p">[</span><span class="sr">/^\/api\//</span><span class="p">]</span> <span class="p">}))</span></span></span></code></pre></div>
</div>
<ol start="3">
<li>在 <code>app.js</code> 中的 <code>错误级别中间件</code> 里面，捕获并处理 Token 认证失败后的错误：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 错误中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 省略其它代码...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 捕获身份认证失败的错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;UnauthorizedError&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;身份认证失败！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 未知错误...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span></span></span></code></pre></div>
</div>
<h3 id="加密">加密</h3>
<p>为了保证密码的安全性，不建议在数据库用明文的形式保存用户密码，推荐对密码进行加密存储。可以使用 <code>bcrypt</code> 对用户密码进行加密。优点：</p>
<ol>
<li>加密之后的密码无法被用户破解</li>
<li>同一明文密码多次加密，得到的加密结果各不相同，保证了安全性</li>
</ol>
<p>在处理用户的函数中，确认用户名可用，调用 <code>bcrypt.hashSync(明文密码, 随机盐的长度)</code> 进行加密。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 注册新用户的处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">regUser</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 获取客户端提交到服务器的用户信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">userinfo</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 对表单中的数据，进行合法性的校验
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// if (!userinfo.username || !userinfo.password) {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   return res.send({ status: 1, message: &#39;用户名或密码不合法！&#39; })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 定义 SQL 语句，查询用户名是否被占用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">sqlStr</span> <span class="o">=</span> <span class="s1">&#39;select * from ev_users where username="?&#39;</span">
</span></span><span class="line"><span class="cl">  <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">sqlStr</span><span class="p">,</span> <span class="nx">userinfo</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 执行 SQL 语句失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// return res.send({ status: 1, message: err.message })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 判断用户名是否被占用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// return res.send({ status: 1, message: &#39;用户名被占用，请更换其他用户名！&#39; })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;用户名被占用，请更换其他用户名！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 调用 bcrypt.hashSync() 对密码进行加密
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">userinfo</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hashSync</span><span class="p">(</span><span class="nx">userinfo</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 定义插入新用户的 SQL 语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">sql</span> <span class="o">=</span> <span class="s1">&#39;insert into ev_users set ?&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 调用 db.query() 执行 SQL 语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">sql</span><span class="p">,</span> <span class="p">{</span> <span class="nx">username</span><span class="o">:</span> <span class="nx">userinfo</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="nx">userinfo</span><span class="p">.</span><span class="nx">password</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 判断 SQL 语句是否执行成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// if (err) return res.send({ status: 1, message: err.message })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 判断影响行数是否为 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// if (results.affectedRows !== 1) return res.send({ status: 1, message: &#39;注册用户失败，请稍后再试！&#39; })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">affectedRows</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;注册用户失败，请稍后再试！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 注册用户成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// res.send({ status: 0, message: &#39;注册成功！&#39; })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;注册成功！&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 登录的处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">login</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;login OK&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<p><kbd>📝 <em>Note</em></kbd> <code>clg</code> 是 <code>console.log()</code> 的 emmit 。</p>
<p>验证密码时，调用 <code>bcrypt.compareSync(用户提交的密码, 数据库中的密码)</code> 方法比较密码是否一致。返回 <code>boolean</code> 。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 拿着用户输入的密码,和数据库中存储的密码进行对比
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">compareResult</span> <span class="o">=</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compareSync</span><span class="p">(</span><span class="nx">userinfo</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span> <span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 如果对比的结果等于 false, 则证明用户输入的密码错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">compareResult</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;登录失败！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// TODO：登录成功，生成 Token 字符串
</span></span></span></code></pre></div>
</div>
<h2 id="验证">验证</h2>
<p>表单验证的原则是前端验证为辅、后端验证为主，后端永远不要相信前端提交过来的认可内容。</p>
<p>单纯使用 <code>if...else...</code> 对合法性进行验证，效率低下、出错率高、维护性差，因此，推荐使用第三方数据验证模块，来降低出错率，让后端程序员更多把精力放在核心业务逻辑的处理上。</p>
<ol>
<li>安装 <code>@hapi/joi</code> 包，为表单中携带每个数据项，定义验证规则</li>
</ol>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm install @hapi/joi</span></span></code></pre></div></div>
</div>
<ol start="2">
<li>安装 <code>@escook/express-joi</code> 中间件，实现自动对表单数据验证的功能</li>
</ol>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm install @escook/express-joi</span></span></code></pre></div></div>
</div>
<ol start="3">
<li>新建 <code>/schema/user.js</code> 用户信息验证模块</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 导入定义验证规则的包
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * string() 值必须是字符串
</span></span></span><span class="line"><span class="cl"><span class="cm"> * alphanum() 值只能是包含 a-zA-Z0-9 的字符串
</span></span></span><span class="line"><span class="cl"><span class="cm"> * min(length) 最小长度
</span></span></span><span class="line"><span class="cl"><span class="cm"> * max(length) 最大长度
</span></span></span><span class="line"><span class="cl"><span class="cm"> * required() 值是必须项，不能为 undefined
</span></span></span><span class="line"><span class="cl"><span class="cm"> * email() 值必须是邮箱
</span></span></span><span class="line"><span class="cl"><span class="cm"> * pattern(正则表达式) 值必须符合正则表达式的规则
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">joi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@hapi/joi&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 定义用户名和密码的验证规则
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">username</span> <span class="o">=</span> <span class="nx">joi</span><span class="p">.</span><span class="nx">string</span><span class="p">().</span><span class="nx">alphanum</span><span class="p">().</span><span class="nx">min</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">max</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="nx">required</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nx">joi</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">string</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">pattern</span><span class="p">(</span><span class="sr">/^[\S]{6,12}$/</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">required</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 定义验证注册和登录表单数据的规则对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">reg_login_schema</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">body</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">username</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">password</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<ol start="4">
<li>导入用户自定义规则，使用 <code>@escook-exoress-joi</code> 验证</li>
</ol>
<p>验证通过，则把路由关系转交给后面的路由处理函数；</p>
<p>验证失败则报全局错误，需在最后的错误捕获中间件处理。</p>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">user_handler</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../router_handler/user&#39;</span><span class="p">)</span> <span class="c1">// 导入用户路由处理函数对应的模块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">expressJoi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@escook/express-joi&#39;</span><span class="p">)</span> <span class="c1">// 1. 导入验证数据的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">reg_login_schema</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../schema/user&#39;</span><span class="p">)</span> <span class="c1">// 2. 导入需要的验证规则对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// 注册新用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/reguser&#39;</span><span class="p">,</span> <span class="nx">expressJoi</span><span class="p">(</span><span class="nx">reg_login_schema</span><span class="p">),</span> <span class="nx">user_handler</span><span class="p">.</span><span class="nx">regUser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="nx">expressJoi</span><span class="p">(</span><span class="nx">reg_login_schema</span><span class="p">),</span> <span class="nx">user_handler</span><span class="p">.</span><span class="nx">login</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span></span></span></code></pre></div>
</div>
<ol start="5">
<li>错误处理函数</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 定义错误级别的中间件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 判断是否是验证失败导致的错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="k">instanceof</span> <span class="nx">joi</span><span class="p">.</span><span class="nx">ValidationError</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 身份认证失败后的错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;UnauthorizedError&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;身份认证失败！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 未知的错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>
<p><kbd>⚠️ <em>Caution</em></kbd> 对分支处理需要使用 <code>return</code> 提前终止，否则报错。</p>
<p><kbd>📝 <em>Note</em></kbd> 重置密码</p>
<h3 id="重置密码">重置密码</h3>
<h4 id="330-实现步骤">3.3.0 实现步骤</h4>
<ol>
<li>定义路由和处理函数</li>
<li>验证表单数据</li>
<li>实现重置密码的功能</li>
</ol>
<h4 id="331-定义路由和处理函数">3.3.1 定义路由和处理函数</h4>
<ol>
<li>在 <code>/router/userinfo.js</code> 模块中，新增 <code>重置密码</code> 的路由：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 重置密码的路由
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/updatepwd&#39;</span><span class="p">,</span> <span class="nx">userinfo_handler</span><span class="p">.</span><span class="nx">updatePassword</span><span class="p">)</span></span></span></code></pre></div>
</div>
<ol>
<li>在 <code>/router_handler/userinfo.js</code> 模块中，定义并向外共享 <code>重置密码</code> 的路由处理函数：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 重置密码的处理函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">updatePassword</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<h4 id="332-验证表单数据">3.3.2 验证表单数据</h4>

    <figure class="island text-base mb-4 not-prose">
        <blockquote class="island-body" >
            <p>核心验证思路：旧密码与新密码，必须符合密码的验证规则，并且新密码不能与旧密码一致！</p>
        </blockquote>
        
    </figure>

<ol>
<li>在 <code>/schema/user.js</code> 模块中，使用 <code>exports</code> 向外共享如下的 <strong>验证规则对象</strong> ：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 验证规则对象 - 重置密码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">update_password_schema</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">body</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 使用 password 这个规则，验证 req.body.oldPwd 的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">oldPwd</span><span class="o">:</span> <span class="nx">password</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 使用 joi.not(joi.ref(&#39;oldPwd&#39;)).concat(password) 规则，验证 req.body.newPwd 的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 解读：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 1. joi.ref(&#39;oldPwd&#39;) 表示 newPwd 的值必须和 oldPwd 的值保持一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 2. joi.not(joi.ref(&#39;oldPwd&#39;)) 表示 newPwd 的值不能等于 oldPwd 的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 3. .concat() 用于合并 joi.not(joi.ref(&#39;oldPwd&#39;)) 和 password 这两条验证规则
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">newPwd</span><span class="o">:</span> <span class="nx">joi</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">joi</span><span class="p">.</span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;oldPwd&#39;</span><span class="p">)).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">password</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<ol start="2">
<li>在 <code>/router/userinfo.js</code> 模块中，导入需要的验证规则对象：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 导入需要的验证规则对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">update_userinfo_schema</span><span class="p">,</span> <span class="nx">update_password_schema</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../schema/user&#39;</span><span class="p">)</span></span></span></code></pre></div>
</div>
<ol start="3">
<li>并在 <code>重置密码的路由</code> 中，使用 <code>update_password_schema</code> 规则验证表单的数据，示例代码如下：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="ui-htmlblock-container"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/updatepwd&#39;</span><span class="p">,</span> <span class="nx">expressJoi</span><span class="p">(</span><span class="nx">update_password_schema</span><span class="p">),</span> <span class="nx">userinfo_handler</span><span class="p">.</span><span class="nx">updatePassword</span><span class="p">)</span></span></span></code></pre></div></div>
</div>
<p><strong>实现重置密码</strong></p>
<ol>
<li>根据 <code>id</code> 查询用户是否存在：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 定义根据 id 查询用户数据的 SQL 语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">sql</span> <span class="o">=</span> <span class="sb">`select * from ev_users where id=?`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 执行 SQL 语句查询用户是否存在
</span></span></span><span class="line"><span class="cl"><span class="c1">// express-jwt 将解析到的数据挂载在 req.user 上
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">sql</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 执行 SQL 语句失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 检查指定 id 的用户是否存在
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;用户不存在！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// TODO：判断提交的旧密码是否正确
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span></span></span></code></pre></div>
</div>
<ol start="2">
<li>判断提交的 <strong>旧密码</strong> 是否正确：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 在头部区域导入 bcryptjs 后，
</span></span></span><span class="line"><span class="cl"><span class="c1">// 即可使用 bcrypt.compareSync(提交的密码，数据库中的密码) 方法验证密码是否正确
</span></span></span><span class="line"><span class="cl"><span class="c1">// compareSync() 函数的返回值为布尔值，true 表示密码正确，false 表示密码错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">bcrypt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bcryptjs&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 判断提交的旧密码是否正确
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">compareResult</span> <span class="o">=</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compareSync</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">oldPwd</span><span class="p">,</span> <span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">compareResult</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;原密码错误！&#39;</span><span class="p">)</span></span></span></code></pre></div>
</div>
<ol start="3">
<li>对新密码进行 <code>bcrypt</code> 加密之后，更新到数据库中：</li>
</ol>
<div class="ui-codeblock">
    
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 定义更新用户密码的 SQL 语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">sql</span> <span class="o">=</span> <span class="sb">`update ev_users set password=? where id=?`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 对新密码进行 bcrypt 加密处理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">newPwd</span> <span class="o">=</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hashSync</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">newPwd</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 执行 SQL 语句，根据 id 更新用户的密码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">sql</span><span class="p">,</span> <span class="p">[</span><span class="nx">newPwd</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">],</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// SQL 语句执行失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// SQL 语句执行成功，但是影响行数不等于 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">affectedRows</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;更新密码失败！&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 更新密码成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">res</span><span class="p">.</span><span class="nx">cc</span><span class="p">(</span><span class="s1">&#39;更新密码成功！&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
</div>

  </div></div>

        <footer class="ui-footer flex flex-wrap gap-2 justify-between p-4"><time datetime='03/20' class="text-muted flex items-center">

    <i class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
</svg>
</i>

    <span class="ms-1">2023-03-20</span>

</time>

</footer>
    </div>

    <div class="grid grid-cols-2 gap-4 text-sm h-14"><a href="/techs/10-node/"
                class="ui-button ui-interactive flex items-center justify-start p-4" draggable="false">
                <i class="icon mr-1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
</svg>
</i>
                <span>10 Node</span>
            </a><a 
                href="/techs/12-database/"
                class="ui-button ui-interactive flex items-center justify-end p-4" draggable="false">
                <span>12 Database</span>
                <i class="icon mr-1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
  <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
</svg>
</i>
            </a></div>

</article>
</main>

          <aside class="ui-grid-right">
            <div class="ui-content" id="main-container-right">
    <div class="ui-card" id="toc-container">
            <header class="ui-card-header flex items-center justify-start gap-2 p-4">
                <i class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-full">
    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" />
</svg>
</i>
                目录
            </header>
            <div class="ui-body text-muted text-sm p-4">
                <nav class="toc" id="toc-nav"><a href="#express" 
                           data-toc-link
                           data-level="1"
                           class="toc-link block py-1 text-base">










<div class="markdown">
    Express
  </div></a><a href="#%e4%bd%bf%e7%94%a8" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    使用
  </div></a><a href="#%e5%ae%89%e8%a3%85" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    安装
  </div></a><a href="#%e5%88%9b%e5%bb%ba" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    创建
  </div></a><a href="#%e5%a4%84%e7%90%86" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    处理
  </div></a><a href="#nodemon" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    <em>nodemon</em>
  </div></a><a href="#%e6%96%b9%e6%b3%95" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    方法
  </div></a><a href="#req" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    <code>req</code>
  </div></a><a href="#express-1" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    <code>express</code>
  </div></a><a href="#%e8%b7%af%e7%94%b1" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    路由
  </div></a><a href="#%e5%8c%b9%e9%85%8d" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    匹配
  </div></a><a href="#%e4%bd%bf%e7%94%a8-1" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    使用
  </div></a><a href="#%e6%a8%a1%e5%9d%97%e5%8c%96" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    模块化
  </div></a><a href="#%e4%b8%ad%e9%97%b4%e4%bb%b6" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    中间件
  </div></a><a href="#%e6%b5%81%e7%a8%8b" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    流程
  </div></a><a href="#%e6%a0%bc%e5%bc%8f" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    格式
  </div></a><a href="#%e5%85%b1%e7%94%a8" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    共用
  </div></a><a href="#%e5%b1%80%e9%83%a8" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    局部
  </div></a><a href="#%e5%88%86%e7%b1%bb" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    分类
  </div></a><a href="#%e8%b7%a8%e5%9f%9f" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    跨域
  </div></a><a href="#cors" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    <em>CORS</em>
  </div></a><a href="#jsonp" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    <em>JSONP</em>
  </div></a><a href="#%e8%ae%a4%e8%af%81" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    认证
  </div></a><a href="#%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    开发模式
  </div></a><a href="#%e8%ba%ab%e4%bb%bd%e8%ae%a4%e8%af%81" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    身份认证
  </div></a><a href="#%e5%8a%a0%e5%af%86" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    加密
  </div></a><a href="#%e9%aa%8c%e8%af%81" 
                                   data-toc-link
                                   data-level="2"
                                   class="toc-link block py-1 pl-4 text-sm">










<div class="markdown">
    验证
  </div></a><a href="#%e9%87%8d%e7%bd%ae%e5%af%86%e7%a0%81" 
                                           data-toc-link
                                           data-level="3"
                                           class="toc-link block py-0.5 pl-8 text-xs">










<div class="markdown">
    重置密码
  </div></a></nav>
            </div>
        </div>

        
          
            <script src="/js/toc.8604a31f519eceda306690e4c19046496d448aae30653aea919df268e9100af7.js" integrity="sha256-hgSjH1GeztowZpDkwZBGSW1Eiq4wZTrqkZ3yaOkQCvc=" defer></script>
          
        
</div>
          </aside>
        </div>

        <footer>
          <div class="ui-grid">
            <aside class="ui-grid-left">
              <div class="ui-content"></div>
            </aside>

            <main class="ui-grid-main"></main>

            <aside class="ui-grid-right">
              <div class="ui-content"></div>
            </aside>
          </div>

          <div class="ui-page-footer ui-footer mt-8 ui-base col-span-full">
            <div class="py-6 flex flex-col gap-1 items-center justify-center">
              <p>
                &copy;&nbsp;Peter&#39;s Blog
              </p>
              <p class="text-xs text-muted">
                <text id="copyright"></text> All rights reserved.
              </p>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </div>

  <button id="scroll-to-top" class="ui-button ui-interactive fixed bottom-4 right-8 z-50 p-4 invisible"
    aria-label="回到顶部"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
</svg>
</button>
</body>

</html>